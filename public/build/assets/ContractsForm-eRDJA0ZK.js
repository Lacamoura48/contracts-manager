import{j as e,W as h}from"./app-C91LIiKT.js";import{A as x,a as p}from"./Autocomplete-DYsJDQ-8.js";import{C as f}from"./CustomInput-C7a1-clE.js";import{S as b}from"./SubmitButton-Hz_r0fTc.js";import{A as j}from"./AuthenticatedLayout-B1aTIU5d.js";import{I as _}from"./InsideLayout-Hg3iAup1.js";import{U as g}from"./undo-2-4sx61dnt.js";import{C as y}from"./circle-plus-C9caxQ4N.js";import"./loader-circle-DFu-tTvV.js";function v(t){return e.jsxs("div",{className:`relative ${t.width??"w-full"}`,children:[e.jsx("label",{className:"mb-1 block text-black",htmlFor:t.id,children:t.label}),t.icon&&e.jsx("div",{className:"absolute right-3 top-2/3 -translate-y-1/2",children:t.icon}),e.jsx("select",{...t,className:`w-full border-none px-2 py-2 placeholder:text-gray-400 focus:ring-black ${t.error?"bg-red-100":"bg-gray-100"} placeholder:text-placeholder rounded-lg ${t.icon&&"pr-11"}`,children:t.children}),e.jsx("span",{className:"text-xs text-red-600",children:t.error})]})}function D(t){const l=t.contract,s=new URLSearchParams(window.location.search),d=l?{client_id:l.client_id,total_price:l.total_price,contract_type:l.contract_type,_method:"PATCH"}:{client_id:s.get("client_id")||"",total_price:"",contract_type:""},{data:r,setData:c,post:o,processing:m,errors:n}=h({...d});console.log(r);const i=a=>{c(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)},u=a=>{a.preventDefault(),l?o(route("contracts.update",l.id)):o(route("contracts.store"),{forceFormData:!0})};return e.jsx(j,{children:e.jsx(_,{headerTitle:"إضافة عقد جديد",headerLink:[{label:"رجوع إلى قائمة العقود",url:route("contracts.index"),icon:g},{label:"إضافة زبون جديد",url:route("clients.create"),icon:y}],children:e.jsxs("form",{onSubmit:u,className:"max-w-2xl py-8",children:[e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsx(x,{placeholder:"إختر زبونا ",dataFunction:async a=>p("clients",a),defaultValue:r.client_id,choiceHandler:a=>c("client_id",a),listItemAtributeName:"full_name",id:"client-contract-form",label:"الزبون",error:n.client_id}),e.jsx(f,{type:"number",label:"المبلغ",placeholder:"المبلغ بالدرهم",min:"0",onChange:i,defaultValue:r.total_price,name:"total_price",id:"contracts-total_price",error:n.total_price})]}),e.jsx("div",{className:"mb-4 flex gap-3",children:e.jsxs(v,{onChange:i,label:"عدد الدفعات",id:"contracts-contract_type",name:"contract_type",defaultSelected:8,children:[e.jsx("option",{value:0,children:"بدون إقساط"}),e.jsx("option",{value:4,children:"4 دفعات"}),e.jsx("option",{value:6,children:"6 دفعات"}),e.jsx("option",{value:8,children:"8 دفعات"}),e.jsx("option",{value:10,children:"10 دفعات"}),e.jsx("option",{value:12,children:"12 دفعات"})]})}),e.jsx("div",{children:e.jsx(b,{loading:m,children:l?"تحديث":"إرسال"})})]})})})}export{D as default};
