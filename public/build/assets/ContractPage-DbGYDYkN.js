import{r as d,j as e,a as n,y as c}from"./app-DUZ4sBdm.js";import{C as x,f as m}from"./functions-BkOTRErP.js";import{c as i}from"./createLucideIcon-DYPfErjj.js";import{C as p,M as h}from"./ContractPDF-D6TZqTZP.js";import{B as u}from"./BondsList-D_Lj4M03.js";import{A as f,I as j}from"./InsideLayout-BAp4FgSn.js";import{S as y}from"./square-pen-CEPnWufL.js";import{P as g}from"./phone-BK-tr9gQ.js";import"./Rubik-Regular-B7k10P2c.js";import"./settings-DLPchzVK.js";import"./Modal-CCX93b4k.js";import"./transition-CTt9baYL.js";import"./PrimaryButton-DbySk94O.js";import"./ProofInput-D35vGc2v.js";import"./Checkbox-CVGfC86t.js";import"./CustomInput-BNyY2DdN.js";import"./FileInput-hqrFoGYv.js";import"./SubmitButton-CpQNDwt8.js";import"./loader-circle-_8TOYsbo.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=i("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=i("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=i("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=i("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=i("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),C=({textToCopy:s,label:l})=>{const[a,t]=d.useState(!1),r=()=>{navigator.clipboard.writeText(s).then(()=>{t(!0),setTimeout(()=>t(!1),3e3)}).catch(o=>{console.error("Failed to copy text: ",o)})};return e.jsx("div",{children:e.jsxs("button",{className:"relative top-1 flex flex-col items-center rounded-full",onClick:r,children:[a?e.jsx(x,{size:35,className:"ml-2 inline"}):e.jsx(k,{size:35,className:"ml-2 inline"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:a?"تم النسخ!":l})]})})};function M({phone:s,text:l}){const t=`https://api.whatsapp.com/send?phone=+971${s.split(" ")[0]}&text=${l}`;return e.jsxs("a",{target:"_blank",href:t,className:"relative top-1 flex flex-col items-center",rel:"noreferrer",children:[e.jsx("img",{className:"w-12",src:"/icons/wa.png",alt:"whatsapp icon"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إرسال عبر وتساب"})]})}function W({contract:s,terms:l,auth:a}){const t=s.client.phone.split(" ")[0],r=window.location.origin+"/contracts/live/"+s.uuid;function o(){c.post(route("contracts.signReset",s.id),{_method:"patch"})}return console.log(s),e.jsx(f,{children:e.jsx(j,{headerTitle:e.jsxs("p",{children:[e.jsx("span",{className:"mb-3 block",children:"الزبون"}),e.jsx(n,{className:"inline",href:route("clients.show",s.client.id),children:e.jsx(w,{size:30,className:"ml-2 inline"})}),e.jsx("span",{className:"rounded-full bg-black px-3 py-1 text-2xl text-white",children:s.client.full_name})]}),rightLink:{label:"تعديل على العقد",url:route("contracts.edit",s.id),icon:y},children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400 md:text-start",children:["أضيف العقد يوم"," ",m(new Date(s.created_at))]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsxs(n,{href:`/contracts/${s.id}/files?type=files`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(v,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملحق"})]}),e.jsxs(n,{href:`/contracts/${s.id}/files?type=notes`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(N,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملاحظة"})]}),e.jsx(p,{contractPage:!0,contract:s,terms:l,auth:a})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsx(C,{textToCopy:r,label:"نسخ رابط العقد"}),e.jsxs(n,{href:route("contracts.send",s.id),className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(h,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"البعث للزبون"})]}),e.jsx(M,{phone:s.client.phone,text:`${encodeURIComponent(r)}%0A%0A${s.user.whatsapp_msg}`})]}),e.jsxs("a",{href:`tel:+971${t}`,className:"mx-auto mt-5 flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 font-bold md:mx-0",children:[e.jsx(g,{size:20})," ",s.client.phone]}),e.jsx("hr",{className:"my-8"}),e.jsxs("h2",{className:"mb-5 text-xl font-bold",children:[" ","توقيع الزبون:"," ",e.jsx("span",{className:"rounded-lg bg-black px-3 py-1 text-white",children:s.signature&&s.signature_proof?"مكتمل":s.signature?"غير مكتمل":"في الإنتظار"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:[s.bonds_count," دفعات"]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(b,{size:20})," المبلغ الإجمالي :"," ",parseFloat(s.bonds_sum_amount).toFixed(2)]})]}),e.jsx("div",{children:e.jsx(u,{bonds:s.bonds})}),e.jsxs("div",{className:"my-8",children:[e.jsxs("div",{className:"mt-6 flex justify-between gap-2",children:[s.signature&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature,alt:"signature"})}),s.signature_proof&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature_proof,alt:"signature-proof"})})]}),s.signature&&e.jsx("button",{onClick:o,type:"button",className:"my-3 underline",children:"إعادة تهيئة التوقيع"})]})]})})})}export{W as default};
