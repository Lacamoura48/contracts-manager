import{j as t,r as d,y as m}from"./app-SC-RllhM.js";import{f as u}from"./functions-BvCdwHj6.js";import{F as h,R as p,a as g,p as f,D as x,P as b,T as s,V as l,I as j,S as y}from"./Rubik-Regular-C1Sd3WK_.js";import{F as w}from"./file-down-B4QDzAH5.js";import{A as v,a as C}from"./Autocomplete-Drj0TP3y.js";import{C as F}from"./CustomInput-nLgN0lb8.js";import{C as P}from"./CustomSelect-D_6TPJMW.js";import{P as B}from"./PrimaryButton-Bqy2fbap.js";import{B as D}from"./BondsList-C6ji_rQR.js";import{E as k}from"./EmptyList-BmgUjjnl.js";import{A as R,I as S}from"./InsideLayout-C-SZUPGn.js";import{C as _}from"./circle-plus-C2Q4aWn7.js";import"./createLucideIcon-BUrU_IxX.js";import"./loader-circle-BkCdm1Ps.js";import"./Modal-6PJfrQI7.js";import"./transition-DrXriNYH.js";import"./ProofInput-GHYtBGIA.js";import"./Checkbox-C0pVu3ed.js";import"./FileInput-Bn9UHanA.js";import"./SubmitButton-33u-JuEv.js";import"./phone--CzvQWDh.js";import"./settings-CHVSl-fa.js";h.register({family:"rubik",fonts:[{src:p,fontWeight:"normal"},{src:g,fontWeight:"bold"}]});const r=y.create({page:{flexDirection:"rtl",fontFamily:"rubik",padding:30,backgroundColor:"#f9f9f9",fontSize:13},bondsGrid:{flexDirection:"row-reverse",flexWrap:"wrap",gap:5},bondCard:{width:265,backgroundColor:"rgb(220,220,240)",borderRadius:8,padding:10},title:{fontWeight:"bold",textAlign:"center",marginBottom:14,fontSize:18},smallInfo:{fontWeight:"light",fontSize:11,textAlign:"center"},textRight:{textAlign:"right"},mb:{marginBottom:14},padwhiteBg:{borderRadius:6,padding:3,backgroundColor:"white"},maxh:{height:200,width:"100%"},bondProof:{width:"100%",height:"100%",objectFit:"contain"},postableNo:{borderRadius:999,paddingHorizontal:8,paddingVertical:4,backgroundColor:"beige",color:"brown",textAlign:"center",fontSize:10,fontWeight:"bold",marginBottom:8}}),I=({bonds:e,currentMonth:a})=>t.jsx(x,{children:t.jsxs(b,{size:"A4",style:r.page,children:[t.jsxs(s,{style:r.title,children:["دفعات شهر"," ",a||new Date().getMonth()+1+"-"+new Date().getFullYear()]}),t.jsx(l,{style:[r.bondsGrid],children:e.map(o=>t.jsxs(l,{style:r.bondCard,children:[t.jsx(s,{style:[r.mb,r.smallInfo],children:u(new Date(o.payement_date))}),t.jsx(l,{style:[r.mb,r.maxh],children:o.proof_image?t.jsx(j,{style:r.bondProof,src:o.proof_image}):t.jsx(s,{style:[r.smallInfo,r.padwhiteBg],children:"بدون صورة إثبات"})}),!o.postable&&t.jsx(s,{style:r.postableNo,children:"شيك ضمان"}),t.jsxs(s,{style:r.smallInfo,children:[o.contract.client.full_name," |"," ",o.contract.client.phone]})]},o.payement_date))})]})});function A({bonds:e,currentMonth:a}){const o=async()=>{const n=await f(t.jsx(I,{bonds:e,currentMonth:a})).toBlob(),i=URL.createObjectURL(n);window.open(i,"_blank")};return t.jsxs("button",{onClick:o,className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(w,{className:"ml-2 mr-1 inline"}),"فتح PDF"]})}function N(){const e=new URLSearchParams(window.location.search),[a,o]=d.useState({month:e.get("month")||"",client_id:e.get("client_id")||"",status:e.get("status")||""}),c=n=>{n.preventDefault(),m.get(route("bonds.index"),{...a})};return t.jsx("div",{className:"mb-5 py-3",children:t.jsxs("form",{onSubmit:c,method:"get",className:"grid grid-cols-2 items-end gap-2 md:grid-cols-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(v,{placeholder:"إختر زبونا",dataFunction:async n=>C("clients",n),defaultValue:e.get("client_id"),choiceHandler:n=>o(i=>({...i,client_id:n})),listItemAtributeName:"full_name",id:"contract-filter-form",label:"الزبون"})}),t.jsx(F,{type:"month",label:"الشهر",onChange:n=>o(i=>({...i,month:n.target.value})),name:"bonds_month",defaultValue:e.get("month"),id:"bonds-month"}),t.jsxs(P,{onChange:n=>o(i=>({...i,status:n.target.value})),id:"filters-bonds-status",name:"status",defaultValue:a.status||"null",children:[t.jsx("option",{value:"",children:"الحالة"}),t.jsx("option",{value:"coming",children:"القادمة"}),t.jsx("option",{value:"pending",children:"المستحقة"}),t.jsx("option",{value:"late",children:"المتأخرة"}),t.jsx("option",{value:"very_late",children:"المتعترة"})]}),t.jsx(B,{type:"submit",className:"w-24",children:"بحث"})]})})}function rt({bonds:e}){const a=new URLSearchParams(window.location.search);return t.jsx(R,{children:t.jsxs(S,{headerTitle:a.get("month")?`دفعات ${a.get("month")} `:"دفعات هذا الشهر",headerLink:[{label:"إضافة عقد جديد",url:"/contracts/create",icon:_}],children:[t.jsx(N,{}),t.jsx("div",{children:t.jsx(A,{bonds:e,currentMonth:a.get("month")})}),t.jsx("div",{className:"max-w-2xl",children:e.length>0?t.jsx(D,{noActions:!0,bonds:e}):t.jsx(k,{model:"عقود"})})]})})}export{rt as default};
