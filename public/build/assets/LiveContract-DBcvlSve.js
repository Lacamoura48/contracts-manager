import{j as e,r as p,y as u,a as v}from"./app-DehJ_fAF.js";import{f as j,n as f}from"./functions-XnxxJV_a.js";import{a as B,R as N,b as _,F as k,p as D,D as F,P as m,V as r,T as l,I as y,S as L}from"./Rubik-Regular-ZtrQs_gN.js";import{B as G}from"./BondsList-6wwrwnrm.js";import{S as P,P as R}from"./index-CocxM0DY.js";import{M as T}from"./Modal-BYrrRJ3m.js";import{P as c}from"./PrimaryButton-CXcTh9Go.js";import{F as z}from"./FileInput-D83Na94S.js";import{M as W}from"./mail-CfoQr07T.js";import"./createLucideIcon-CkReN7G6.js";import"./ProofInput-DQVWUeo5.js";import"./Checkbox-BzOQ4nYQ.js";import"./CustomInput-BqgeRW-c.js";import"./SubmitButton-BW2iHNlS.js";import"./loader-circle-CF0ZxIw-.js";import"./phone-b05R8o9T.js";import"./settings-Boywpak2.js";import"./transition-By_USbLs.js";B.register({family:"rubik",fonts:[{src:N,fontWeight:"normal"},{src:_,fontWeight:"bold"}]});const s=L.create({page:{padding:30,flexDirection:"rtl",textAlign:"right",fontFamily:"rubik",fontSize:9,lineHeight:1.5},topLeft:{position:"absolute",top:70,left:30},topRight:{position:"absolute",top:70,right:30},signatureCard:{border:1,borderColor:"#aaa",borderRadius:6,padding:10,flex:1},textMd:{fontSize:12},bigTitle:{fontWeight:"bold",fontSize:28,textAlign:"center",marginBottom:12},itemsCenter:{alignItems:"center",justifyContent:"flex-end"},signatureImage:{maxWidth:80,maxHeight:80,marginHorizontal:"auto"},bold:{fontWeight:"bold"},emptyTitle:{fontSize:22,color:"rgb(180,180,230)"},intro:{fontWeight:"bold",fontSize:12,textDecoration:"underline",marginBottom:12},textCenter:{textAlign:"center"},smallMb:{marginBottom:12},esmallMb:{marginBottom:6},eesmallMb:{marginBottom:3},flexSmallGap:{display:"flex",flexDirection:"row",gap:5},flexBetween:{display:"flex",flexDirection:"row",justifyContent:"space-between"},textLg:{fontSize:16,marginTop:14,marginBottom:6},padwhiteBg:{borderRadius:6,padding:3,backgroundColor:"white"},emptyCard:{height:120,alignItems:"center",justifyContent:"center"},squareCard:{backgroundColor:"rgb(220,220,240)",borderRadius:8,flex:1,padding:10},bondsGrid:{flexDirection:"row",flexWrap:"wrap",gap:5},bondCard:{width:265,backgroundColor:"rgb(220,220,240)",borderRadius:8,padding:10},smallText:{fontSize:8,gap:8},fixedWidth:{width:60}}),A=["الأولى","الثانية","الثالثة","الرابعة","الخامسة","السادسة","السابعة","الثامنة","التاسعة","العاشرة","الحادية عشرة","الثانية عشرة"],I=({contract:t,terms:a})=>{var d;return e.jsxs(F,{children:[e.jsxs(m,{size:"A4",style:s.page,children:[e.jsxs(r,{style:[s.topLeft,s.signatureCard,s.flexSmallGap,s.itemsCenter],children:[e.jsx(l,{children:j(new Date(t.created_at))}),e.jsx(l,{style:s.bold,children:": انه في تاريخ"})]}),e.jsxs(r,{style:[s.topRight,s.signatureCard,s.flexSmallGap,s.itemsCenter],children:[e.jsx(l,{children:t.code}),e.jsx(l,{style:s.bold,children:": الرقم التسلسلي للعقد "})]}),e.jsx(l,{style:s.bigTitle,children:"عقد تصنيع وتوريد اثاث"}),e.jsx(l,{style:[s.intro,s.textCenter],children:"مقدمة"}),e.jsx(l,{style:[s.textCenter,s.smallMb],children:"وبعون من الله تعالى تم الاتفاق بين كل من"}),e.jsxs(r,{style:[s.flexSmallGap,s.esmallMb],children:[e.jsxs(r,{style:s.squareCard,children:[e.jsx(l,{style:[s.intro],children:"الطرف الثاني"}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.esmallMb],children:[e.jsx(l,{style:s.padwhiteBg,children:t.client.full_name}),e.jsx(l,{style:s.fixedWidth,children:"الاسم الكامل"})]}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.esmallMb],children:[e.jsx(l,{style:s.padwhiteBg,children:t.client.phone}),e.jsx(l,{style:[s.esmallMb,s.fixedWidth],children:"الهاتف"})]}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.esmallMb],children:[e.jsx(l,{style:s.padwhiteBg,children:t.client.id_code}),e.jsx(l,{style:[s.esmallMb,s.fixedWidth],children:"رقم الهوية"})]}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.esmallMb],children:[e.jsx(l,{style:s.padwhiteBg,children:t.client.email}),e.jsx(l,{style:s.fixedWidth,children:"الايميل"})]})]}),e.jsxs(r,{style:s.squareCard,children:[e.jsx(l,{style:[s.intro],children:"الطرف الأول"}),e.jsx(l,{style:[s.esmallMb,s.textCenter],children:t.user.company}),e.jsxs(l,{style:[s.esmallMb,s.textCenter],children:["رخصة رقم ",t.user.code]}),e.jsxs(l,{style:[s.esmallMb,s.textCenter],children:["هاتف: ",t.user.phone]}),e.jsxs(l,{style:[s.esmallMb,s.textCenter],children:["العنوان: ",t.user.address]})]})]}),e.jsx(l,{style:s.intro,children:"تمهيد"}),e.jsx(l,{style:s.smallMb,children:"فإنه ولما كان الطرف الثاني يرغب في تصنيع وتوريد أعمال أثاث مغربي وحيت أن الطرف الاول مختص في هذا النوع من الأعمال فقد اتفق الطرفان على ما يلي"}),e.jsxs(r,{style:s.squareCard,children:[e.jsx(l,{style:[s.intro,s.textLg],children:"البند الأول"}),e.jsx(l,{children:"تعتبر المقدمة وموضوع العقد جزء لا يتجزأ من هذا العقد"}),e.jsx(l,{style:[s.intro,s.textLg],children:"البند الثاني"}),e.jsx(l,{children:"يتعهد الطرف الاول بتوريد الأغراض حسب المتفق عليه في العقد"}),e.jsx(l,{style:[s.intro,s.textLg],children:"البند الثالث: مدة الإنجاز"}),e.jsx(l,{children:"توعد الطرف الأول بإنجاز الأعمال وتسليمها خلال"}),e.jsxs(r,{style:[s.padwhiteBg,s.flexSmallGap,{flexDirection:"row-reverse"}],children:[e.jsx(l,{children:t.work_duration}),e.jsx(l,{children:+t.work_duration>10?"يوم عمل":"أيام عمل"})]}),e.jsx(l,{children:"ابتداء من تاريخ أول دفعة الذي سيتم ذكره في البند الخامس"}),e.jsx(l,{style:[s.intro,s.textLg],children:"البند الرابع: قيمة العقد"}),e.jsx(l,{children:"اتفق الطرفان على أن يقوم الطرف الاول بتصنيع وتوريد الأثاث طبقا للأسعار التالية ذكرها حسب ما هو موضح تفصيلا في عرض السعر بمبلغ إجمالى وقدره"}),e.jsx(l,{style:[s.padwhiteBg,s.esmallMb,s.textMd],children:f(Math.round(parseFloat(t.bonds_sum_amount).toFixed(2)))}),e.jsx(l,{children:"على ان يلتزم الطرف الثاني بتواريخ الدفع المذكورة في العقد وفي حال تخلفه عن السداد في التواريخ المذكورة سلفا يحق للطرف الأول اتخاد كافة الإجراءات القانونية التي تضمن حقه"}),e.jsx(l,{style:[s.intro,s.textLg],children:"البند الخامس: الدفعات"}),e.jsx(l,{children:"تم الاتفاق بين الطرفين أن تتم المحاسبة ودفع المبلغ على عدد"}),e.jsxs(r,{style:[s.padwhiteBg,s.flexSmallGap,{flexDirection:"row-reverse"}],children:[e.jsx(l,{children:t.bonds_count}),e.jsx(l,{children:+t.bonds_count>10?"دفعة":"دفعات"})]}),e.jsx(l,{children:"دفعات حسب جدول التواريخ التالية ذكرها"})]})]}),e.jsx(m,{size:"A4",style:s.page,children:e.jsx(r,{style:[s.bondsGrid,s.esmallMb,{flexDirection:"row-reverse"}],children:[...Array(12).keys()].map(i=>{const n=t.bonds[i];return n?e.jsxs(r,{style:s.bondCard,children:[e.jsxs(l,{style:[s.intro,{marginBottom:6}],children:["الدفعة ",A[i]]}),e.jsxs(r,{children:[e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.eesmallMb],children:[e.jsx(l,{style:[s.padwhiteBg,{flex:1,fontSize:8}],children:f(parseFloat(n.amount))}),e.jsx(l,{style:{width:28},children:"قدرها "})]}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter,s.esmallMb],children:[e.jsx(l,{style:[s.padwhiteBg,{flex:1}],children:parseFloat(n.amount).toFixed(2)}),e.jsx(l,{children:"بالأرقام"})]}),e.jsxs(r,{style:[s.flexSmallGap,s.itemsCenter],children:[e.jsx(l,{style:[s.padwhiteBg,{flex:1}],children:j(new Date(n.payement_date))}),e.jsx(l,{style:{width:28},children:"بتاريخ"})]})]})]},i):e.jsx(r,{style:[s.bondCard,s.emptyCard],children:e.jsx(l,{style:s.emptyTitle,children:"فارغ"})},i)})})}),e.jsx(m,{size:"A4",style:s.page,children:e.jsxs(r,{style:s.squareCard,children:[e.jsx(l,{style:[s.intro,s.textLg],children:"البند السادس: المواصفات"}),e.jsx(l,{style:s.intro,children:"نوع الاسفنج"}),e.jsx(l,{style:s.smallMb,children:"اتفق الطرفان استخدام الاسفنج طبق للمواصفات التالية"}),e.jsxs(r,{style:[s.smallMb,{gap:6,flexDirection:"row-reverse"}],children:[e.jsxs(l,{style:s.padwhiteBg,children:[t.intensity," الكثافة"]}),e.jsxs(l,{style:s.padwhiteBg,children:[t.width," عرض"]}),e.jsxs(l,{style:s.padwhiteBg,children:[t.height," ارتفاع"]})]}),e.jsx(l,{style:s.intro,children:"نوع القماش والخياطة"}),e.jsx(l,{style:s.smallMb,children:"اتفق الطرفان استخدام القماش الذي تم اختیاره وتم ارسال الصور عبر منصة واتساب وتم الموافقة عليها"}),e.jsx(l,{style:s.intro,children:"شكل وتصميم الخشب"}),e.jsx(l,{style:s.smallMb,children:"اتفق الطرفان على التصميم حسب ما تم اخياره من النماذج المتوفرة بالمعرض والتي تم ارسال صورها عبر منصة واتساب وتم الموافقة عليها"}),((d=t.files)==null?void 0:d.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{style:s.intro,children:"ملاحظات"}),e.jsx(r,{style:[s.padwhiteBg,s.smallMb],children:t.files.map((i,n)=>e.jsx(l,{children:i.title},n))})]}),e.jsx(l,{style:s.intro,children:"تنویه"}),e.jsx(l,{style:{fontSize:10},children:"تعتبر المحادثات بين الطرفين عبر منصة واتساب والتي يوضح فيها الطرف الأول للطرف الثاني تفاصيل عن الاعمال المتفق عليها جزءا لا يتجزأ من العقد حيت انها توضح وتبين بوضوح ما تم ذكره بالعقد اما عن طريق فيديوهات او صور لما تم اختياره والموافقة عليه"})]})}),e.jsxs(m,{style:s.page,children:[e.jsxs(r,{style:[s.squareCard,s.smallMb],children:[e.jsx(l,{style:[s.intro],children:"الشروط والاحكام"}),e.jsx(r,{children:a.map(i=>e.jsx(l,{style:[s.eesmallMb,s.smallText],children:i.terms},i.id))}),e.jsx(l,{style:[s.intro,s.textLg],children:"البند السابع: الاقرارات"}),e.jsx(l,{children:"اقر الطرفان بانهما اطلعا ووافقا على بنود هذا العقد وحرر من نسختين بعد ان تم توقيعه من الطرفين"})]}),e.jsxs(r,{style:s.bondsGrid,children:[e.jsxs(r,{style:s.signatureCard,children:[e.jsx(l,{style:[s.intro],children:"الطرف الثانى"}),t.signature&&e.jsx(y,{style:s.signatureImage,src:t.signature})]}),e.jsxs(r,{style:s.signatureCard,children:[e.jsx(l,{style:[s.intro],children:"الطرف الأول"}),t.user.signature&&e.jsx(y,{style:s.signatureImage,src:t.user.signature})]})]})]})]})},q=({contract:t,terms:a})=>{const d=async()=>{const n=await D(e.jsx(I,{terms:a,contract:t})).toBlob(),x=URL.createObjectURL(n);window.open(x,"_blank")};return e.jsxs("button",{onClick:d,className:"relative top-1 w-full max-w-xl rounded-xl bg-gray-200 py-3 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[e.jsx(k,{className:"ml-2 mr-1 inline"}),"رؤية العقد PDF"]})};function U({show:t,signature:a,id:d,closeHandler:i}){const n=p.useRef({}),[x,h]=p.useState(),[g,b]=p.useState(),w=()=>{n.current.clear()},C=o=>{u.post(route("contracts.sign",d),{signature:o,_method:"patch"},{onSuccess:()=>h(!0)})},S=()=>{if(n.current.isEmpty())return;const o=n.current.getTrimmedCanvas().toDataURL("image/png");C(o)};function M(o){o.preventDefault(),u.post(route("contracts.signProof",d),{signature_proof:g,_method:"PATCH"},{onSuccess:i})}return e.jsx(T,{show:t,children:a||x?e.jsxs("div",{className:"flex flex-col items-center py-4",children:[e.jsxs("h2",{className:"text-black",children:[e.jsx("span",{className:"font-bold text-gray-600",children:"الخطوة الثانية:"})," ","يرجى تحميل صورة هويتك، كدليل على أنك مالك التوقيع"]}),e.jsxs("form",{className:"flex w-full flex-col gap-4 px-5 py-4",onSubmit:M,children:[e.jsx(z,{name:"signature_proof",label:"صورة بطاقة الهوية",imageSelected:g,onChange:o=>b(o.target.files[0]),id:"signature_proof_input"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{children:"إرسال"}),e.jsx(c,{onClick:i,type:"button",children:"رجوع"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center py-4",children:[e.jsxs("h2",{className:"text-black",children:[e.jsx("span",{className:"font-bold text-gray-600",children:"الخطوة الأولى:"})," ","الرجاء التوقيع في المنطقة أدناه"]}),e.jsx(P,{ref:n,penColor:"black",canvasProps:{width:400,height:250,className:"sigCanvas border-2 border-gray-600 rounded-xl mb-3"}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{onClick:S,children:"تأكيد"}),e.jsx(c,{onClick:w,children:"إعادة المحاولة"}),e.jsx(c,{onClick:i,children:"رجوع"})]})]})})}function ae({contract:t,auth:a,terms:d}){const[i,n]=p.useState(!1),x=t.bonds.filter(h=>h.status==="paid"||h.status==="posted");return e.jsxs("div",{className:"flex h-screen flex-col justify-center px-8 py-10 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold md:text-3xl",children:`عقد خاص ب${t.client.full_name}`}),e.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400",children:["أنشئ العقد يوم"," ",j(new Date(t.created_at))]}),e.jsxs("div",{className:"mx-auto mb-4 flex w-full max-w-xl gap-4",children:[e.jsxs("div",{className:"w-full rounded-2xl bg-gray-200 px-4 py-6",children:[e.jsx("h3",{children:"القيمة الإجمالية"}),e.jsx("p",{className:"mt-2 rounded-full bg-white px-2 py-1 text-xl font-bold",children:parseFloat(t.bonds_sum_amount).toFixed(2)})]}),e.jsxs("div",{className:"w-full rounded-2xl bg-gray-200 px-4 py-6",children:[e.jsx("h3",{children:"الدفعات المدفوعة"}),e.jsxs("p",{className:"mt-2 rounded-full bg-white px-2 py-1 text-xl font-bold text-green-600",children:[x.length,e.jsxs("span",{className:"font-normal text-black",children:["/",t.bonds.length]})]})]})]}),e.jsx("div",{className:"mb-3 w-full max-w-xl flex-1 self-center overflow-y-scroll rounded-2xl border bg-gray-200 px-2",children:e.jsx(G,{noActions:!0,bonds:t.bonds})}),e.jsxs("div",{className:"mt-auto flex flex-col items-center gap-4",children:[a.user&&e.jsx(e.Fragment,{children:e.jsxs(v,{href:route("contracts.send",t.id),className:"relative top-1 w-full max-w-xl rounded-xl bg-gray-200 py-3 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[e.jsx(W,{className:"ml-2 inline"}),"البعث للزبون"]})}),e.jsx(q,{terms:d,auth:a,contract:t}),!a.user&&!t.signature_proof&&e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>n(!0),className:"relative top-1 w-full max-w-xl rounded-xl border border-black bg-black py-3 pl-4 pr-1 text-white transition-colors duration-500 hover:bg-gray-800 hover:text-white",children:[e.jsx(R,{className:"ml-2 inline"}),"توقيع العقد"]})}),e.jsx(U,{signature:t.signature,signatureProof:t.signature_proof,show:i,id:t.id,closeHandler:()=>n(!1)})]})]})}export{ae as default};
