import{r as n,j as e,y as u,W as x}from"./app-CJrd39CQ.js";import{f}from"./functions-DlqVqW7_.js";import{M as h}from"./Modal-Co3Bzedi.js";import{P as p}from"./PrimaryButton-DoUuyTh0.js";import{S as g}from"./SecondaryButton-DppElyMr.js";import{T as j}from"./trash-BGBhXyBU.js";import{C as b}from"./CustomInput-CVKSG4un.js";import{F as y,S as N}from"./SubmitButton-BLRxvb0D.js";import{E as w}from"./EmptyList-CTQ1TIiA.js";import{c as k,A as v}from"./AuthenticatedLayout-B_cWOMgT.js";import{I as S}from"./InsideLayout-Cpjfg6F6.js";import{U as F}from"./undo-2-B4kfNEsi.js";import"./transition-DLfc6gy4.js";import"./loader-circle-BDRgFzsw.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=k("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function D({file:t}){const[r,s]=n.useState(!1);function a(){u.delete(route("files.delete",t.id),{onStart:()=>s(!1)})}return e.jsxs("div",{className:"relative mb-3 break-inside-avoid rounded-lg bg-gray-200 px-2 py-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"absolute left-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-black",children:e.jsx(j,{color:"white",size:18})}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:f(new Date(t.created_at))}),t.title&&e.jsx("p",{className:"mb-3 text-lg font-medium text-black",children:t.title}),t.image&&e.jsx("img",{className:"rounded-lg",src:t.image,alt:"file image"}),e.jsx(h,{show:r,children:e.jsxs("div",{className:"px-8 py-10",children:[e.jsxs("h2",{className:"mb-5 text-2xl font-bold",children:['هل أنت متأكد أنك تريد حذف "',t.title,'"']}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{className:"text-xl",onClick:a,children:"نعم"}),e.jsx(g,{className:"text-xl",onClick:()=>s(!1),children:"لا"})]})]})})]})}function E({closeHandler:t,contract_id:r}){const[s,a]=n.useState(!1),{data:l,setData:o,post:m,processing:c}=x({title:"",image:null});function d(i){if(i.preventDefault(),!l.title&&!l.image){a("يجب ملء أحد المدخلات لإضافة ملحق");return}m(route("files.store",r),{forceFormData:!0,onFinish:t})}return e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-5 rounded-lg border-2 border-gray-200 px-2 py-5 font-medium",children:[e.jsx(b,{placeholder:"عنوان للملحق",onChange:i=>o("title",i.target.value),name:"title",id:"title-files",error:s}),e.jsx(y,{imageSelected:l.image,onChange:i=>o("image",i.target.files[0]),name:"image",id:"image-files",label:"صورة الملحق"}),e.jsx(N,{loading:c,children:"إضافة"})]})}function I({files:t,contract_id:r}){const[s,a]=n.useState(!1);return e.jsxs("div",{children:[e.jsx("div",{className:"my-6",children:s?e.jsx(E,{closeHandler:()=>a(!1),contract_id:r}):e.jsxs("button",{onClick:()=>a(!0),className:"w-full rounded-lg bg-black py-3 text-center font-medium text-white",children:[e.jsx(C,{size:25,className:"ml-3 inline-block"}),e.jsx("span",{children:"إضافة ملحق"})]})}),t.length>0?e.jsx("div",{className:"columns-1 gap-3 md:columns-2",children:t.map((l,o)=>e.jsx(D,{file:l},o))}):e.jsx(w,{model:"ملحقات"})]})}function G({contract:t}){return e.jsx(v,{children:e.jsx(S,{headerTitle:`الملحقات العقد خاص ب${t.client.full_name}`,headerLink:[{label:"رجوع إلى العقد",url:route("contracts.show",t.id),icon:F}],children:e.jsx("div",{className:"max-w-2xl",children:e.jsx(I,{contract_id:t.id,files:t.files})})})})}export{G as default};
