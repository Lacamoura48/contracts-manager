import{r as n,j as e,a as d,y as p}from"./app-DehJ_fAF.js";import{C as c,f as m}from"./functions-XnxxJV_a.js";import{c as i}from"./createLucideIcon-CkReN7G6.js";import{B as x}from"./BondsList-6wwrwnrm.js";import{A as h,I as u}from"./InsideLayout-BUSuyAD_.js";import{U as f}from"./undo-2-WGJ6tzR1.js";import{S as g}from"./square-pen-CQ9ry6RB.js";import{M as y}from"./mail-CfoQr07T.js";import{P as b}from"./phone-b05R8o9T.js";import"./Modal-BYrrRJ3m.js";import"./transition-By_USbLs.js";import"./PrimaryButton-CXcTh9Go.js";import"./ProofInput-DQVWUeo5.js";import"./Checkbox-BzOQ4nYQ.js";import"./CustomInput-BqgeRW-c.js";import"./FileInput-D83Na94S.js";import"./SubmitButton-BW2iHNlS.js";import"./loader-circle-CF0ZxIw-.js";import"./settings-Boywpak2.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=i("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=i("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=i("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=i("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),w=({textToCopy:s,label:t})=>{const[r,a]=n.useState(!1),o=()=>{navigator.clipboard.writeText(s).then(()=>{a(!0),setTimeout(()=>a(!1),3e3)}).catch(l=>{console.error("Failed to copy text: ",l)})};return e.jsx("div",{children:e.jsxs("button",{className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-2 transition-colors duration-500 hover:bg-black hover:text-white",onClick:o,children:[r?e.jsx(c,{className:"ml-2 inline"}):e.jsx(N,{className:"ml-2 inline"}),r?"تم النسخ!":t]})})};function C({phone:s,text:t}){const a=`https://api.whatsapp.com/send?phone=+971${s.split(" ")[0]}&text=${t}`;return e.jsxs("a",{target:"_blank",href:a,className:"relative top-1 flex gap-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",rel:"noreferrer",children:[e.jsx("img",{className:"w-8",src:"/icons/wa.png",alt:"whatsapp icon"}),"إرسال عبر Whatsapp"]})}function H({contract:s}){const t=window.location.origin+"/contracts/live/"+s.uuid;function r(){p.post(route("contracts.signReset",s.id),{_method:"patch"})}return e.jsx(h,{children:e.jsx(u,{headerTitle:`عقد خاص ب${s.client.full_name}`,headerLink:[{label:"رجوع إلى قائمة عقود",url:route("contracts.index"),icon:f},{label:"تعديل على العقد",url:route("contracts.edit",s.id),icon:g},{label:"المزيد عن هذا الزبون",url:route("clients.show",s.client.id),icon:v},{label:`الملاحظات/الملحقات (${s.files_count})`,url:route("contracts.files",s.id),icon:k}],children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400 md:text-start",children:["أضيف العقد يوم"," ",m(new Date(s.created_at))]}),e.jsxs("div",{className:"flex justify-center gap-3 md:justify-start md:text-start",children:[e.jsx(w,{textToCopy:t,label:"نسخ رابط العقد"}),e.jsxs(d,{href:route("contracts.send",s.id),className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[e.jsx(y,{className:"ml-2 inline"}),"البعث للزبون"]}),e.jsx(C,{phone:s.client.phone,text:`${encodeURIComponent(t)}%0A%0A${s.user.whatsapp_msg}`})]}),e.jsxs("p",{className:"mx-auto mt-5 flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 font-bold md:mx-0",children:[e.jsx(b,{size:20})," ",s.client.phone]}),e.jsx("hr",{className:"my-8"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:[s.bonds_count," دفعات"]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(j,{size:20})," المبلغ الإجمالي :"," ",parseFloat(s.bonds_sum_amount).toFixed(2)]})]}),e.jsx("div",{children:e.jsx(x,{bonds:s.bonds})}),e.jsxs("div",{className:"my-8",children:[e.jsxs("h2",{className:"text-xl font-bold",children:[" ","توقيع الزبون:"," ",e.jsx("span",{className:"rounded-lg bg-black px-3 py-1 text-white",children:s.signature&&s.signature_proof?"مكتمل":s.signature?"غير مكتمل":"في الإنتظار"})]}),e.jsxs("div",{className:"mt-6 flex justify-between gap-2",children:[s.signature&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature,alt:"signature"})}),s.signature_proof&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature_proof,alt:"signature-proof"})})]}),s.signature&&e.jsx("button",{onClick:r,type:"button",className:"my-3 underline",children:"إعادة تهيئة التوقيع"})]})]})})})}export{H as default};
