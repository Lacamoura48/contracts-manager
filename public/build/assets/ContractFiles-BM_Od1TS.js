import{r as n,j as e,y as c,W as d}from"./app-8bf4zTSY.js";import{f as u}from"./functions-DlqVqW7_.js";import{M as x}from"./Modal-D8JQOY2r.js";import{P as f}from"./PrimaryButton-CpfVlQKS.js";import{S as h}from"./SecondaryButton-Dak1hl1k.js";import{T as p}from"./trash-BrMuY6X3.js";import{C as j}from"./CustomInput-B__vz_fm.js";import{F as g,S as b}from"./SubmitButton-oZsN3Kx4.js";import{E as y}from"./EmptyList-2zdsL-i2.js";import{c as N,A as w}from"./AuthenticatedLayout-D1If3P-l.js";import{I as k}from"./InsideLayout-JJt3FMnC.js";import{U as v}from"./undo-2-COBmOndE.js";import"./transition-BbOkymTu.js";import"./loader-circle-Clp36k-M.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=N("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function S({file:t}){const[l,s]=n.useState(!1);function a(){c.delete(route("files.delete",t.id),{onStart:()=>s(!1)})}return e.jsxs("div",{className:"relative mb-3 break-inside-avoid rounded-lg bg-gray-200 px-2 py-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"absolute left-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-black",children:e.jsx(p,{color:"white",size:18})}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:u(new Date(t.created_at))}),e.jsx("p",{className:"mb-3 text-lg font-medium text-black",children:t.title}),e.jsx("img",{className:"rounded-lg",src:t.image,alt:"file image"}),e.jsx(x,{show:l,children:e.jsxs("div",{className:"px-8 py-10",children:[e.jsxs("h2",{className:"mb-5 text-2xl font-bold",children:['هل أنت متأكد أنك تريد حذف "',t.title,'"']}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{className:"text-xl",onClick:a,children:"نعم"}),e.jsx(h,{className:"text-xl",onClick:()=>s(!1),children:"لا"})]})]})})]})}function C({closeHandler:t,contract_id:l}){const{data:s,setData:a,post:i,processing:o,errors:I}=d({title:"",image:null});function m(r){r.preventDefault(),i(route("files.store",l),{forceFormData:!0,onFinish:t})}return e.jsxs("form",{onSubmit:m,className:"flex flex-col gap-5 rounded-lg border-2 border-gray-200 px-2 py-5 font-medium",children:[e.jsx(j,{placeholder:"عنوان للملحق",onChange:r=>a("title",r.target.value),name:"title",id:"title-files"}),e.jsx(g,{imageSelected:s.image,onChange:r=>a("image",r.target.files[0]),name:"image",id:"image-files",label:"صورة الملحق"}),e.jsx(b,{loading:o,children:"إضافة"})]})}function D({files:t,contract_id:l}){const[s,a]=n.useState(!1);return e.jsxs("div",{children:[e.jsx("div",{className:"my-6",children:s?e.jsx(C,{closeHandler:()=>a(!1),contract_id:l}):e.jsxs("button",{onClick:()=>a(!0),className:"w-full rounded-lg bg-black py-3 text-center font-medium text-white",children:[e.jsx(F,{size:25,className:"ml-3 inline-block"}),e.jsx("span",{children:"إضافة ملحق"})]})}),t.length>0?e.jsx("div",{className:"columns-1 gap-3 md:columns-2",children:t.map((i,o)=>e.jsx(S,{file:i},o))}):e.jsx(y,{model:"ملحقات"})]})}function $({contract:t}){return e.jsx(w,{children:e.jsx(k,{headerTitle:`الملحقات العقد خاص ب${t.client.full_name}`,headerLink:[{label:"رجوع إلى العقد",url:route("contracts.show",t.id),icon:v}],children:e.jsx("div",{className:"max-w-2xl",children:e.jsx(D,{contract_id:t.id,files:t.files})})})})}export{$ as default};
