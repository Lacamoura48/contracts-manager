import{j as t,b as lt,c as it,r as N,g as ct,y as Q,a as ht}from"./app-BJefF5Kw.js";import{f as H,n as Z}from"./functions--TDurM2V.js";import{a as dt,R as ut,b as pt,F as ft,p as xt,D as mt,P as U,V as j,T as a,S as vt}from"./Rubik-Regular-DxEDqqyF.js";import{M as yt}from"./Modal-BFhf_Gbj.js";import{P as O}from"./PrimaryButton-BasR5bdL.js";import{F as gt}from"./FileInput-BrwXr06S.js";import{M as _t}from"./mail-DzFzNyuQ.js";import{c as bt}from"./createLucideIcon-DsqieJ3-.js";import"./transition-CbtpEwEs.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=bt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);dt.register({family:"rubik",fonts:[{src:ut,fontWeight:"normal"},{src:pt,fontWeight:"bold"}]});const r=vt.create({page:{padding:30,flexDirection:"rtl",textAlign:"right",fontFamily:"rubik",fontSize:10,lineHeight:1.5},topLeft:{position:"absolute",top:70,left:30},topRight:{position:"absolute",top:70,right:30},signatureCard:{border:1,borderColor:"#aaa",borderRadius:6,padding:10,flex:1},textMd:{fontSize:12},bigTitle:{fontWeight:"bold",fontSize:28,textAlign:"center",marginBottom:12},itemsCenter:{alignItems:"center",justifyContent:"flex-end"},bold:{fontWeight:"bold"},intro:{fontWeight:"bold",fontSize:12,textDecoration:"underline",marginBottom:12},textCenter:{textAlign:"center"},smallMb:{marginBottom:12},esmallMb:{marginBottom:6},eesmallMb:{marginBottom:3},flexSmallGap:{display:"flex",flexDirection:"row",gap:5},flexBetween:{display:"flex",flexDirection:"row",justifyContent:"space-between"},textLg:{fontSize:16,marginTop:14,marginBottom:6},padwhiteBg:{borderRadius:6,padding:3,backgroundColor:"white"},squareCard:{backgroundColor:"rgb(220,220,240)",borderRadius:8,flex:1,padding:10},bondsGrid:{flexDirection:"row",flexWrap:"wrap",gap:5},bondCard:{width:265,backgroundColor:"rgb(220,220,240)",borderRadius:8,padding:10},smallText:{fontSize:7,gap:8}}),wt=["الأولى","الثانية","الثالثة","الرابعة","الخامسة","السادسة","السابعة","الثامنة","التاسعة","العاشرة","الحادية عشرة","الثانية عشرة"],Ct=({contract:e})=>{var s;return t.jsxs(mt,{children:[t.jsxs(U,{size:"A4",style:r.page,children:[t.jsxs(j,{style:[r.topLeft,r.signatureCard,r.flexSmallGap,r.itemsCenter],children:[t.jsx(a,{children:H(new Date(e.created_at))}),t.jsx(a,{style:r.bold,children:": انه في تاريخ"})]}),t.jsxs(j,{style:[r.topRight,r.signatureCard,r.flexSmallGap,r.itemsCenter],children:[t.jsx(a,{children:e.code}),t.jsx(a,{style:r.bold,children:": الرقم التسلسلي للعقد "})]}),t.jsx(a,{style:r.bigTitle,children:"عقد تصنيع وتوريد اثاث"}),t.jsx(a,{style:[r.intro,r.textCenter],children:"مقدمة"}),t.jsx(a,{style:[r.textCenter,r.smallMb],children:"وبعون من الله تعالى تم الاتفاق بين كل من"}),t.jsxs(j,{style:[r.flexSmallGap,r.esmallMb],children:[t.jsxs(j,{style:r.squareCard,children:[t.jsx(a,{style:[r.intro],children:"الطرف الثاني"}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.esmallMb],children:[t.jsx(a,{style:r.padwhiteBg,children:e.client.full_name}),t.jsx(a,{children:"الاسم الكامل"})]}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.esmallMb],children:[t.jsx(a,{style:r.padwhiteBg,children:e.client.phone}),t.jsx(a,{style:r.esmallMb,children:"الهاتف"})]}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.esmallMb],children:[t.jsx(a,{style:r.padwhiteBg,children:e.client.id_code}),t.jsx(a,{style:r.esmallMb,children:"رقم الهوية"})]}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.esmallMb],children:[t.jsx(a,{style:r.padwhiteBg,children:e.client.email}),t.jsx(a,{children:"الايميل"})]})]}),t.jsxs(j,{style:r.squareCard,children:[t.jsx(a,{style:[r.intro],children:"الطرف الأول"}),t.jsx(a,{style:[r.esmallMb],children:"شركة فن المجالس لصناعة الأثاث ذ.م.م"}),t.jsx(a,{style:[r.esmallMb],children:"رخصة رقم 783512"}),t.jsx(a,{style:[r.esmallMb],children:"هاتف: 0522565677/مقرها بالشارقة"})]})]}),t.jsx(a,{style:r.intro,children:"تمهيد"}),t.jsx(a,{style:r.smallMb,children:"فإنه ولما كان الطرف الثاني يرغب في تصنيع وتوريد أعمال أثاث مغربي وحيت أن الطرف الاول مختص في هذا النوع من الأعمال فقد اتفق الطرفان على ما يلي"}),t.jsxs(j,{style:r.squareCard,children:[t.jsx(a,{style:[r.intro,r.textLg],children:"البند الأول"}),t.jsx(a,{children:"تعتبر المقدمة وموضوع العقد جزء لا يتجزأ من هذا العقد"}),t.jsx(a,{style:[r.intro,r.textLg],children:"البند الثاني"}),t.jsx(a,{children:"يتعهد الطرف الاول بتوريد الأغراض حسب المتفق عليه في العقد"}),t.jsx(a,{style:[r.intro,r.textLg],children:"البند الثالث: مدة الإنجاز"}),t.jsxs(a,{children:["توعد الطرف الأول بإنجاز الأعمال وتسليمها خلال",10,"يوم عمل ابتداء من تاريخ أول دفعة الذي سيتم ذكره في البند الخامس"]}),t.jsx(a,{style:[r.intro,r.textLg],children:"البند الرابع: قيمة العقد"}),t.jsx(a,{children:"اتفق الطرفان على أن يقوم الطرف الاول بتصنيع وتوريد الأثاث طبقا للأسعار التالية ذكرها حسب ما هو موضح تفصيلا في عرض السعر بمبلغ إجمالى وقدره"}),t.jsx(a,{style:[r.padwhiteBg,r.esmallMb,r.textMd],children:Z(parseFloat(e.bonds_sum_amount))}),t.jsx(a,{children:"على ان يلتزم الطرف الثاني بتواريخ الدفع المذكورة في العقد وفي حال تخلفه عن السداد في التواريخ المذكورة سلفا يحق للطرف الأول اتخاد كافة الإجراءات القانونية التي تضمن حقه"}),t.jsx(a,{style:[r.intro,r.textLg],children:"البند الخامس: الدفعات"}),t.jsxs(a,{children:["تم الاتفاق بين الطرفين أن تتم المحاسبة ودفع المبلغ على عدد",e.bonds_count," دفعات حسب جدول التواريخ التالية ذكرها"]})]})]}),t.jsx(U,{size:"A4",style:r.page,children:t.jsx(j,{style:[r.bondsGrid,r.esmallMb,{flexDirection:"row-reverse"}],children:e.bonds.map((i,n)=>t.jsxs(j,{style:r.bondCard,children:[t.jsxs(a,{style:[r.intro,{marginBottom:6}],children:["الدفعة ",wt[n]]}),t.jsxs(j,{children:[t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.eesmallMb],children:[t.jsx(a,{style:[r.padwhiteBg,{flex:1,fontSize:8}],children:Z(parseFloat(i.amount))}),t.jsx(a,{style:{width:28},children:"قدرها "})]}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter,r.esmallMb],children:[t.jsx(a,{style:[r.padwhiteBg,{flex:1}],children:i.amount}),t.jsx(a,{children:"بالأرقام"})]}),t.jsxs(j,{style:[r.flexSmallGap,r.itemsCenter],children:[t.jsx(a,{style:[r.padwhiteBg,{flex:1}],children:H(new Date(i.payement_date))}),t.jsx(a,{style:{width:28},children:"بتاريخ"})]})]})]},i.payement_date))})}),t.jsxs(U,{size:"A4",style:r.page,children:[t.jsxs(j,{style:[r.bondsGrid,r.esmallMb],children:[t.jsxs(j,{style:r.bondCard,children:[t.jsx(a,{style:[r.intro,r.textLg],children:"البند السادس: المواصفات"}),t.jsx(a,{style:r.intro,children:"نوع الاسفنج"}),t.jsx(a,{style:r.smallMb,children:"اتفق الطرفان استخدام الاسفنج طبق للمواصفات التالية"}),t.jsxs(j,{style:[r.flexBetween,r.smallMb],children:[t.jsxs(a,{style:r.padwhiteBg,children:[e.intensity," الكثافة"]}),t.jsxs(a,{style:r.padwhiteBg,children:[e.width," عرض"]}),t.jsxs(a,{style:r.padwhiteBg,children:[e.height," ارتفاع"]})]}),t.jsx(a,{style:r.intro,children:"نوع القماش والخياطة"}),t.jsx(a,{style:r.smallMb,children:"اتفق الطرفان استخدام القماش الذي تم اختیاره وتم ارسال الصور عبر منصة واتساب وتم الموافقة عليها"}),t.jsx(a,{style:r.intro,children:"شكل وتصميم الخشب"}),t.jsx(a,{style:r.smallMb,children:"اتفق الطرفان على التصميم حسب ما تم اخياره من النماذج المتوفرة بالمعرض والتي تم ارسال صورها عبر منصة واتساب وتم الموافقة عليها"}),((s=e.files)==null?void 0:s.length)>0&&t.jsxs(t.Fragment,{children:[t.jsx(a,{style:r.intro,children:"ملاحظات"}),t.jsx(j,{style:[r.padwhiteBg,r.smallMb],children:e.files.map((i,n)=>t.jsx(a,{children:i.title},n))})]}),t.jsx(a,{style:r.intro,children:"تنویه"}),t.jsx(a,{style:{fontSize:10},children:"تعتبر المحادثات بين الطرفين عبر منصة واتساب والتي يوضح فيها الطرف الأول للطرف الثاني تفاصيل عن الاعمال المتفق عليها جزءا لا يتجزأ من العقد حيت انها توضح وتبين بوضوح ما تم ذكره بالعقد اما عن طريق فيديوهات او صور لما تم اختياره والموافقة عليه"}),t.jsx(a,{style:[r.intro,r.textLg],children:"البند السابع: الاقرارات"}),t.jsx(a,{children:"اقر الطرفان بانهما اطلعا ووافقا على بنود هذا العقد وحرر من نسختين بعد ان تم توقيعه من الطرفين"})]}),t.jsxs(j,{style:[r.bondCard,r.smallText],children:[t.jsx(a,{style:[r.intro],children:"الشروط والاحكام"}),t.jsx(a,{children:"لا يحق للطرف الثاني مطالبة الطرف الاول بتفكيك الاثاث القديم او نقله لذلك يرجى التأكد من خلو المكان المراد وضع الاثاث به من الاثاث القديم وتنظيفه قبل وصول العمال"}),t.jsx(a,{children:"في حال التوصيل للمجمعات السكنية التي تحتاج الى ترخيص للدخول لا يتحمل الطرف الاول اي مسؤولية عن عدم السماح له بالتوصيل ولا يلتزم باي مواقيت معمول بها بالمجمع السكني ويلتزم الطرف الثاني باستخراج التراخيص اللازمة والاتفاق مع الجهة المسؤولة"}),t.jsx(a,{children:"في حال عدم توفر مصعد خدمات في البنايات السكنية يمكن الطرف الاول من توصيل الاغراض يحق له المطالبة برسوم اضافية للتوصيل الى محل السكن"}),t.jsx(a,{children:"يتم تأجيل توصيل الطلبيات في الحالات التالية: المطر والكوارث الطبيعية وايام الاحتفالات الوطنية وانقطاع الطرق الناتج عنها. ولا يتم احتساب ايام العطل والاعياد ضمن مدة الانجاز"}),t.jsx(a,{children:"في حال امتناع او عدم تمكن الطرف الثاني من استلام التوريدات تحت اي ضرف كان عند موعد التسليم يتم احتساب رسوم التخزين 100 درهم اماراتي عن کل يوم تأخير"}),t.jsx(a,{children:"الطرف الاول غير مسؤول عن اي ضرر في البضاعة غير عيوب التصنيع بعد معاينتها أتناء التسليم"}),t.jsx(a,{children:"في حال وجود عيب في التصنيع يجب ان تكون جميع البضائع المرتجعة في حالتها الاصلية وغير مستخدمة ولم يحدث لها اي ضرر وسيحتفظ الطرف الاول بالحق في فحص البضاعة قبل قبول ارجاعه"}),t.jsx(a,{children:"في حال الارجاع وعندما يتعين على فريق التسليم العودة لأخد القطع المراد ارجاعها يتكبد الطرف الثاني رسوم التوصيل والتي سيتم ابلاغه بها قبل وصول الفريق لأخد القطع وسيتم خصم هذه الرسوم من المبلغ المراد استرداده"}),t.jsx(a,{children:"لا يقبل اي طلب للإرجاع بالنسبة للإسفنج والمراتب والاقمشة والقطع التي تم تفصيلها على الطلب"}),t.jsx(a,{children:"لا يمكن طلب اعادة جدولة التوصيل والتركيب الا باتصال مسبق خلال 48 ساعة قبل موعد التسليم وسيحدد الموعد الجديد حسب المواعيد المتاحة"}),t.jsx(a,{children:"الجزء المدفوع كعربون لا يسترد في اي حال من الأحوال وإذا طلب الطرف الثاني الغاء الطلبية يحق للطرف الاول المطالبة بتعويض عن الضرر الناجم عن ذلك"}),t.jsx(a,{children:"في حال رجوع أي من الشيكات المستلمة بخصوص الدفعات ولاي سبب كان يتم دفع غرامة مالية وقدرها 500 درهم"}),t.jsx(a,{children:"في حال طلب الطرف الثاني الغاء الطلبية او رفض استلام الطلبية في الموعد المحدد يحق للطرف الأول المطالبة بقيمة العقد كاملة"}),t.jsx(a,{children:"تبقى ملكية الأغراض للطرف الاول حتى يتم تسديد المبالغ المستحقة بموجب هذا العقد. وفي حال عدم دفع أي دفعة يحق للطرف الأول استرداد الأغراض واتخاد الإجراءات القانونية اللازمة"}),t.jsx(a,{children:"في حال المنازعات القضائية يتحمل الطرف الثاني جميع الرسوم واتعاب المحاماة الخاصة بالقضية"}),t.jsx(a,{children:"في حال رغبة الطرف الثاني في إلغاء الطلب بعد مرور يومين على الطلب يحق للطرف الأول المطالبة بمبلغ تعويض عن الاضرار الناجمة عن دالك"}),t.jsx(a,{children:"لا يحق للطرف الثاني مطالبة الطرف الأول باي تعديلات او إصلاحات في القطع بعد استلامها واذا لزم ذلك يحق للطرف الأول المطالبة برسوم إضافية لذلك"}),t.jsx(a,{children:"في حال طلب الزبون تغييرات في المواصفات غير المتفق عليه في العقد يحق للطرف الأول المطالبة برسوم إضافية حسب ما سيتم الاتفاق عليه كملحق للعقد"}),t.jsx(a,{children:"في حال التوصيل وعدم تمكن الطرف الثاني من استلام الطلب او عدم تواجده بمكان التوصيل او لاي سبب كان يتم ارجاع الطلبية وجدولة موعد اخر للتسليم حسب المواعيد المتاحة ويتحمل الطرف الثاني رسوم التوصيل والتركيب وسيتم احتساب المبلغ حسب مكان التوصيل"})]})]}),t.jsxs(j,{style:r.bondsGrid,children:[t.jsx(j,{style:r.signatureCard,children:t.jsx(a,{style:[r.intro],children:"الطرف الثانى"})}),t.jsx(j,{style:r.signatureCard,children:t.jsx(a,{style:[r.intro],children:"الطرف الأول"})})]})]})]})},Pt=({contract:e})=>{const s=async()=>{const n=await xt(t.jsx(Ct,{contract:e})).toBlob(),o=URL.createObjectURL(n);window.open(o,"_blank")};return t.jsxs("button",{onClick:s,className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(ft,{className:"ml-2 mr-1 inline"}),"فتح PDF"]})};var st={exports:{}},q={exports:{}},G,tt;function Mt(){if(tt)return G;tt=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return G=e,G}var I,et;function St(){if(et)return I;et=1;var e=Mt();function s(){}function i(){}return i.resetWarningCache=s,I=function(){function n(h,d,f,l,p,x){if(x!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function o(){return n}var c={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:s};return c.PropTypes=c,c},I}var nt;function Tt(){return nt||(nt=1,q.exports=St()()),q.exports}/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function L(e,s,i){this.x=e,this.y=s,this.time=i||new Date().getTime()}L.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};L.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};L.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function Y(e,s,i,n){this.startPoint=e,this.control1=s,this.control2=i,this.endPoint=n}Y.prototype.length=function(){for(var e=10,s=0,i=void 0,n=void 0,o=0;o<=e;o+=1){var c=o/e,h=this._point(c,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(c,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var f=h-i,l=d-n;s+=Math.sqrt(f*f+l*l)}i=h,n=d}return s};Y.prototype._point=function(e,s,i,n,o){return s*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+o*e*e*e};function Dt(e,s,i){var n,o,c,h=null,d=0;i||(i={});var f=function(){d=i.leading===!1?0:Date.now(),h=null,c=e.apply(n,o),h||(n=o=null)};return function(){var l=Date.now();!d&&i.leading===!1&&(d=l);var p=s-(l-d);return n=this,o=arguments,p<=0||p>s?(h&&(clearTimeout(h),h=null),d=l,c=e.apply(n,o),h||(n=o=null)):!h&&i.trailing!==!1&&(h=setTimeout(f,p)),c}}function _(e,s){var i=this,n=s||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=Dt(_.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=_.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(i._mouseButtonDown=!0,i._strokeBegin(o))},this._handleMouseMove=function(o){i._mouseButtonDown&&i._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var c=o.changedTouches[0];i._strokeBegin(c)}},this._handleTouchMove=function(o){o.preventDefault();var c=o.targetTouches[0];i._strokeMoveUpdate(c)},this._handleTouchEnd=function(o){var c=o.target===i._canvas;c&&(o.preventDefault(),i._strokeEnd(o))},this.on()}_.prototype.clear=function(){var e=this._ctx,s=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(),this._isEmpty=!0};_.prototype.fromDataURL=function(e){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,o=i.ratio||window.devicePixelRatio||1,c=i.width||this._canvas.width/o,h=i.height||this._canvas.height/o;this._reset(),n.src=e,n.onload=function(){s._ctx.drawImage(n,0,0,c,h)},this._isEmpty=!1};_.prototype.toDataURL=function(e){var s;switch(e){case"image/svg+xml":return this._toSVG();default:for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return(s=this._canvas).toDataURL.apply(s,[e].concat(n))}};_.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};_.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};_.prototype.isEmpty=function(){return this._isEmpty};_.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};_.prototype._strokeUpdate=function(e){var s=e.clientX,i=e.clientY,n=this._createPoint(s,i),o=this._data[this._data.length-1],c=o&&o[o.length-1],h=c&&n.distanceTo(c)<this.minDistance;if(!(c&&h)){var d=this._addPoint(n),f=d.curve,l=d.widths;f&&l&&this._drawCurve(f,l.start,l.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};_.prototype._strokeEnd=function(e){var s=this.points.length>2,i=this.points[0];if(!s&&i&&this._drawDot(i),i){var n=this._data[this._data.length-1],o=n[n.length-1];i.equals(o)||n.push({x:i.x,y:i.y,time:i.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};_.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};_.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};_.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};_.prototype._createPoint=function(e,s,i){var n=this._canvas.getBoundingClientRect();return new L(e-n.left,s-n.top,i||new Date().getTime())};_.prototype._addPoint=function(e){var s=this.points,i=void 0;if(s.push(e),s.length>2){s.length===3&&s.unshift(s[0]),i=this._calculateCurveControlPoints(s[0],s[1],s[2]);var n=i.c2;i=this._calculateCurveControlPoints(s[1],s[2],s[3]);var o=i.c1,c=new Y(s[1],n,o,s[2]),h=this._calculateCurveWidths(c);return s.shift(),{curve:c,widths:h}}return{}};_.prototype._calculateCurveControlPoints=function(e,s,i){var n=e.x-s.x,o=e.y-s.y,c=s.x-i.x,h=s.y-i.y,d={x:(e.x+s.x)/2,y:(e.y+s.y)/2},f={x:(s.x+i.x)/2,y:(s.y+i.y)/2},l=Math.sqrt(n*n+o*o),p=Math.sqrt(c*c+h*h),x=d.x-f.x,m=d.y-f.y,w=p/(l+p),g={x:f.x+x*w,y:f.y+m*w},C=s.x-g.x,M=s.y-g.y;return{c1:new L(d.x+C,d.y+M),c2:new L(f.x+C,f.y+M)}};_.prototype._calculateCurveWidths=function(e){var s=e.startPoint,i=e.endPoint,n={start:null,end:null},o=this.velocityFilterWeight*i.velocityFrom(s)+(1-this.velocityFilterWeight)*this._lastVelocity,c=this._strokeWidth(o);return n.start=this._lastWidth,n.end=c,this._lastVelocity=o,this._lastWidth=c,n};_.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};_.prototype._drawPoint=function(e,s,i){var n=this._ctx;n.moveTo(e,s),n.arc(e,s,i,0,2*Math.PI,!1),this._isEmpty=!1};_.prototype._drawCurve=function(e,s,i){var n=this._ctx,o=i-s,c=Math.floor(e.length());n.beginPath();for(var h=0;h<c;h+=1){var d=h/c,f=d*d,l=f*d,p=1-d,x=p*p,m=x*p,w=m*e.startPoint.x;w+=3*x*d*e.control1.x,w+=3*p*f*e.control2.x,w+=l*e.endPoint.x;var g=m*e.startPoint.y;g+=3*x*d*e.control1.y,g+=3*p*f*e.control2.y,g+=l*e.endPoint.y;var C=s+l*o;this._drawPoint(w,g,C)}n.closePath(),n.fill()};_.prototype._drawDot=function(e){var s=this._ctx,i=typeof this.dotSize=="function"?this.dotSize():this.dotSize;s.beginPath(),this._drawPoint(e.x,e.y,i),s.closePath(),s.fill()};_.prototype._fromData=function(e,s,i){for(var n=0;n<e.length;n+=1){var o=e[n];if(o.length>1)for(var c=0;c<o.length;c+=1){var h=o[c],d=new L(h.x,h.y,h.time),f=h.color;if(c===0)this.penColor=f,this._reset(),this._addPoint(d);else if(c!==o.length-1){var l=this._addPoint(d),p=l.curve,x=l.widths;p&&x&&s(p,x,f)}}else{this._reset();var m=o[0];i(m)}}};_.prototype._toSVG=function(){var e=this,s=this._data,i=this._canvas,n=Math.max(window.devicePixelRatio||1,1),o=0,c=0,h=i.width/n,d=i.height/n,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"width",i.width),f.setAttributeNS(null,"height",i.height),this._fromData(s,function(y,D,E){var k=document.createElement("path");if(!isNaN(y.control1.x)&&!isNaN(y.control1.y)&&!isNaN(y.control2.x)&&!isNaN(y.control2.y)){var F="M "+y.startPoint.x.toFixed(3)+","+y.startPoint.y.toFixed(3)+" "+("C "+y.control1.x.toFixed(3)+","+y.control1.y.toFixed(3)+" ")+(y.control2.x.toFixed(3)+","+y.control2.y.toFixed(3)+" ")+(y.endPoint.x.toFixed(3)+","+y.endPoint.y.toFixed(3));k.setAttribute("d",F),k.setAttribute("stroke-width",(D.end*2.25).toFixed(3)),k.setAttribute("stroke",E),k.setAttribute("fill","none"),k.setAttribute("stroke-linecap","round"),f.appendChild(k)}},function(y){var D=document.createElement("circle"),E=typeof e.dotSize=="function"?e.dotSize():e.dotSize;D.setAttribute("r",E),D.setAttribute("cx",y.x),D.setAttribute("cy",y.y),D.setAttribute("fill",y.color),f.appendChild(D)});var l="data:image/svg+xml;base64,",p='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+c+" "+h+" "+d+'"')+(' width="'+h+'"')+(' height="'+d+'"')+">",x=f.innerHTML;if(x===void 0){var m=document.createElement("dummy"),w=f.childNodes;m.innerHTML="";for(var g=0;g<w.length;g+=1)m.appendChild(w[g].cloneNode(!0));x=m.innerHTML}var C="</svg>",M=p+x+C;return l+btoa(M)};_.prototype.fromData=function(e){var s=this;this.clear(),this._fromData(e,function(i,n){return s._drawCurve(i,n.start,n.end)},function(i){return s._drawDot(i)}),this._data=e};_.prototype.toData=function(){return this._data};const kt=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),Et=lt(kt);var V={exports:{}},rt;function Rt(){return rt||(rt=1,function(e,s){(function(i,n){e.exports=n()})(it,function(){return function(i){function n(c){if(o[c])return o[c].exports;var h=o[c]={exports:{},id:c,loaded:!1};return i[c].call(h.exports,h,h.exports,n),h.loaded=!0,h.exports}var o={};return n.m=i,n.c=o,n.p="",n(0)}([function(i,n){function o(l){var p=l.getContext("2d"),x=l.width,m=l.height,w=p.getImageData(0,0,x,m).data,g=d(!0,x,m,w),C=d(!1,x,m,w),M=f(!0,x,m,w),y=f(!1,x,m,w),D=y-M+1,E=C-g+1,k=p.getImageData(M,g,D,E);return l.width=D,l.height=E,p.clearRect(0,0,D,E),p.putImageData(k,0,0),l}function c(l,p,x,m){return{red:m[4*(x*p+l)],green:m[4*(x*p+l)+1],blue:m[4*(x*p+l)+2],alpha:m[4*(x*p+l)+3]}}function h(l,p,x,m){return c(l,p,x,m).alpha}function d(l,p,x,m){for(var w=l?1:-1,g=l?0:x-1,C=g;l?C<x:C>-1;C+=w)for(var M=0;M<p;M++)if(h(M,C,p,m))return C;return null}function f(l,p,x,m){for(var w=l?1:-1,g=l?0:p-1,C=g;l?C<p:C>-1;C+=w)for(var M=0;M<x;M++)if(h(C,M,p,m))return C;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o}])})}(V)),V.exports}(function(e,s){(function(i,n){e.exports=n(Tt(),N,Et,Rt())})(it,function(i,n,o,c){return function(h){function d(l){if(f[l])return f[l].exports;var p=f[l]={exports:{},id:l,loaded:!1};return h[l].call(p.exports,p,p.exports,d),p.loaded=!0,p.exports}var f={};return d.m=h,d.c=f,d.p="",d(0)}([function(h,d,f){function l(b){return b&&b.__esModule?b:{default:b}}function p(b,v){var S={};for(var P in b)v.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(b,P)&&(S[P]=b[P]);return S}function x(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function m(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?b:v}function w(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}Object.defineProperty(d,"__esModule",{value:!0});var g=Object.assign||function(b){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(b[P]=S[P])}return b},C=function(){function b(v,S){for(var P=0;P<S.length;P++){var u=S[P];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(v,u.key,u)}}return function(v,S,P){return S&&b(v.prototype,S),P&&b(v,P),v}}(),M=f(1),y=l(M),D=f(2),E=l(D),k=f(3),F=l(k),ot=f(4),at=l(ot),A=function(b){function v(){var S,P,u,$;x(this,v);for(var X=arguments.length,J=Array(X),W=0;W<X;W++)J[W]=arguments[W];return P=u=m(this,(S=v.__proto__||Object.getPrototypeOf(v)).call.apply(S,[this].concat(J))),u._sigPad=null,u._excludeOurProps=function(){var T=u.props,R=(T.canvasProps,T.clearOnResize,p(T,["canvasProps","clearOnResize"]));return R},u.getCanvas=function(){return u._canvas},u.getTrimmedCanvas=function(){var T=document.createElement("canvas");return T.width=u._canvas.width,T.height=u._canvas.height,T.getContext("2d").drawImage(u._canvas,0,0),(0,at.default)(T)},u.getSignaturePad=function(){return u._sigPad},u._checkClearOnResize=function(){u.props.clearOnResize&&u._resizeCanvas()},u._resizeCanvas=function(){var T=u.props.canvasProps||{},R=T.width,K=T.height;if(!R||!K){var B=u._canvas,z=Math.max(window.devicePixelRatio||1,1);R||(B.width=B.offsetWidth*z),K||(B.height=B.offsetHeight*z),B.getContext("2d").scale(z,z),u.clear()}},u.on=function(){return window.addEventListener("resize",u._checkClearOnResize),u._sigPad.on()},u.off=function(){return window.removeEventListener("resize",u._checkClearOnResize),u._sigPad.off()},u.clear=function(){return u._sigPad.clear()},u.isEmpty=function(){return u._sigPad.isEmpty()},u.fromDataURL=function(T,R){return u._sigPad.fromDataURL(T,R)},u.toDataURL=function(T,R){return u._sigPad.toDataURL(T,R)},u.fromData=function(T){return u._sigPad.fromData(T)},u.toData=function(){return u._sigPad.toData()},$=P,m(u,$)}return w(v,b),C(v,[{key:"componentDidMount",value:function(){this._sigPad=new F.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var S=this,P=this.props.canvasProps;return E.default.createElement("canvas",g({ref:function(u){S._canvas=u}},P))}}]),v}(D.Component);A.propTypes={velocityFilterWeight:y.default.number,minWidth:y.default.number,maxWidth:y.default.number,minDistance:y.default.number,dotSize:y.default.oneOfType([y.default.number,y.default.func]),penColor:y.default.string,throttle:y.default.number,onEnd:y.default.func,onBegin:y.default.func,canvasProps:y.default.object,clearOnResize:y.default.bool},A.defaultProps={clearOnResize:!0},d.default=A},function(h,d){h.exports=i},function(h,d){h.exports=n},function(h,d){h.exports=o},function(h,d){h.exports=c}])})})(st);var Lt=st.exports;const Bt=ct(Lt);function Ot({show:e,signature:s,signatureProof:i,id:n,closeHandler:o}){const c=N.useRef({}),[h,d]=N.useState(),[f,l]=N.useState(),p=()=>{c.current.clear()},x=g=>{Q.post(route("contracts.sign",n),{signature:g,_method:"patch"},{onSuccess:()=>d(!0)})},m=()=>{if(c.current.isEmpty())return;const g=c.current.getTrimmedCanvas().toDataURL("image/png");x(g)};function w(g){g.preventDefault(),Q.post(route("contracts.signProof",n),{signature_proof:f,_method:"PATCH"},{onSuccess:o})}return t.jsx(yt,{show:e,children:s||h?t.jsxs("div",{className:"flex flex-col items-center py-4",children:[t.jsxs("h2",{className:"text-black",children:[t.jsx("span",{className:"font-bold text-gray-600",children:"الخطوة الثانية:"})," ","يرجى تحميل صورة هويتك، كدليل على أنك مالك التوقيع"]}),t.jsxs("form",{className:"flex w-full flex-col gap-4 px-5 py-4",onSubmit:w,children:[t.jsx(gt,{name:"signature_proof",label:"صورة بطاقة الهوية",imageSelected:f,onChange:g=>l(g.target.files[0]),id:"signature_proof_input"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(O,{children:"إرسال"}),t.jsx(O,{onClick:o,type:"button",children:"رجوع"})]})]})]}):t.jsxs("div",{className:"flex flex-col items-center py-4",children:[t.jsxs("h2",{className:"text-black",children:[t.jsx("span",{className:"font-bold text-gray-600",children:"الخطوة الأولى:"})," ","الرجاء التوقيع في المنطقة أدناه"]}),t.jsx(Bt,{ref:c,penColor:"black",canvasProps:{width:400,height:250,className:"sigCanvas border-2 border-gray-600 rounded-xl mb-3"}}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(O,{onClick:m,children:"تأكيد"}),t.jsx(O,{onClick:p,children:"إعادة المحاولة"}),t.jsx(O,{onClick:o,children:"رجوع"})]})]})})}function Vt({contract:e,auth:s}){const[i,n]=N.useState(!1);return t.jsxs("div",{className:"flex min-h-screen flex-col justify-center pt-5 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold md:text-3xl",children:`عقد خاص ب${e.client.full_name}`}),t.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400",children:["أنشئ العقد يوم"," ",H(new Date(e.created_at))]}),t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.user&&t.jsx(t.Fragment,{children:t.jsxs(ht,{href:route("contracts.send",e.id),className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(_t,{className:"ml-2 inline"}),"البعث للزبون"]})}),!s.user&&!e.signature_proof&&t.jsx(t.Fragment,{children:t.jsxs("button",{onClick:()=>n(!0),className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(jt,{className:"ml-2 inline"}),"توقيع العقد"]})}),t.jsx(Pt,{contract:e}),t.jsx(Ot,{signature:e.signature,signatureProof:e.signature_proof,show:i,id:e.id,closeHandler:()=>n(!1)})]})]})}export{Vt as default};
