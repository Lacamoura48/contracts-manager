import{j as t,r as m,y as d}from"./app-DehJ_fAF.js";import{f as u}from"./functions-XnxxJV_a.js";import{F as h,a as p,R as g,b as f,p as x,D as b,P as j,T as i,V as l,I as y,S as w}from"./Rubik-Regular-ZtrQs_gN.js";import{A as v,a as C}from"./Autocomplete-DI8NG9ra.js";import{C as B}from"./CustomInput-BqgeRW-c.js";import{C as D}from"./CustomSelect-lTRAwo1j.js";import{P}from"./PrimaryButton-CXcTh9Go.js";import{B as k}from"./BondsList-6wwrwnrm.js";import{E as F}from"./EmptyList-DA76XQ0N.js";import{A as R,I as S}from"./InsideLayout-BUSuyAD_.js";import{C as _}from"./circle-plus-DtcYeNi_.js";import"./createLucideIcon-CkReN7G6.js";import"./loader-circle-CF0ZxIw-.js";import"./Modal-BYrrRJ3m.js";import"./transition-By_USbLs.js";import"./ProofInput-DQVWUeo5.js";import"./Checkbox-BzOQ4nYQ.js";import"./FileInput-D83Na94S.js";import"./SubmitButton-BW2iHNlS.js";import"./phone-b05R8o9T.js";import"./settings-Boywpak2.js";p.register({family:"rubik",fonts:[{src:g,fontWeight:"normal"},{src:f,fontWeight:"bold"}]});const r=w.create({page:{flexDirection:"rtl",fontFamily:"rubik",padding:30,backgroundColor:"#f9f9f9",fontSize:13},bondsGrid:{flexDirection:"row-reverse",flexWrap:"wrap",gap:5},bondCard:{width:265,backgroundColor:"rgb(220,220,240)",borderRadius:8,padding:10},title:{fontWeight:"bold",textAlign:"center",marginBottom:14,fontSize:18},smallInfo:{fontWeight:"light",fontSize:11,textAlign:"center"},textRight:{textAlign:"right"},mb:{marginBottom:14},padwhiteBg:{borderRadius:6,padding:3,backgroundColor:"white"},maxh:{maxHeight:200},postableNo:{borderRadius:999,paddingHorizontal:8,paddingVertical:4,backgroundColor:"beige",color:"brown",textAlign:"center",fontSize:10,fontWeight:"bold",marginBottom:8}}),I=({bonds:e,currentMonth:a})=>t.jsx(b,{children:t.jsxs(j,{size:"A4",style:r.page,children:[t.jsxs(i,{style:r.title,children:["دفعات شهر"," ",a||new Date().getMonth()+1+"-"+new Date().getFullYear()]}),t.jsx(l,{style:[r.bondsGrid],children:e.map(o=>t.jsxs(l,{style:r.bondCard,children:[t.jsx(i,{style:[r.mb,r.smallInfo],children:u(new Date(o.payement_date))}),t.jsx(l,{style:[r.mb,r.maxh],children:o.proof_image?t.jsx(y,{style:r.bondProof,src:o.proof_image}):t.jsx(i,{style:[r.smallInfo,r.padwhiteBg],children:"بدون صورة إثبات"})}),!o.postable&&t.jsx(i,{style:r.postableNo,children:"شيك ضمان"}),t.jsxs(i,{style:r.smallInfo,children:[o.contract.client.full_name," |"," ",o.contract.client.phone]})]},o.payement_date))})]})});function A({bonds:e,currentMonth:a}){const o=async()=>{const n=await x(t.jsx(I,{bonds:e,currentMonth:a})).toBlob(),s=URL.createObjectURL(n);window.open(s,"_blank")};return t.jsxs("button",{onClick:o,className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(h,{className:"ml-2 mr-1 inline"}),"فتح PDF"]})}function N(){const e=new URLSearchParams(window.location.search),[a,o]=m.useState({month:e.get("month")||"",client_id:e.get("client_id")||"",status:e.get("status")||""}),c=n=>{n.preventDefault(),d.get(route("bonds.index"),{...a})};return t.jsx("div",{className:"mb-5 py-3",children:t.jsxs("form",{onSubmit:c,method:"get",className:"grid grid-cols-2 items-end gap-2 md:grid-cols-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(v,{placeholder:"إختر زبونا",dataFunction:async n=>C("clients",n),defaultValue:e.get("client_id"),choiceHandler:n=>o(s=>({...s,client_id:n})),listItemAtributeName:"full_name",id:"contract-filter-form",label:"الزبون"})}),t.jsx(B,{type:"month",label:"الشهر",onChange:n=>o(s=>({...s,month:n.target.value})),name:"bonds_month",defaultValue:e.get("month"),id:"bonds-month"}),t.jsxs(D,{onChange:n=>o(s=>({...s,status:n.target.value})),id:"filters-bonds-status",name:"status",defaultValue:a.status||"null",children:[t.jsx("option",{value:"",children:"الحالة"}),t.jsx("option",{value:"coming",children:"القادمة"}),t.jsx("option",{value:"pending",children:"المستحقة"}),t.jsx("option",{value:"late",children:"المتأخرة"}),t.jsx("option",{value:"very_late",children:"المتعترة"})]}),t.jsx(P,{type:"submit",className:"w-24",children:"بحث"})]})})}function ot({bonds:e}){const a=new URLSearchParams(window.location.search);return t.jsx(R,{children:t.jsxs(S,{headerTitle:a.get("month")?`دفعات ${a.get("month")} `:"دفعات هذا الشهر",headerLink:[{label:"إضافة عقد جديد",url:"/contracts/create",icon:_}],children:[t.jsx(N,{}),t.jsx("div",{children:t.jsx(A,{bonds:e,currentMonth:a.get("month")})}),t.jsx("div",{className:"max-w-2xl",children:e.length>0?t.jsx(k,{noActions:!0,bonds:e}):t.jsx(F,{model:"عقود"})})]})})}export{ot as default};
