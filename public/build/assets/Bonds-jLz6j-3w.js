import{j as t,r as m,y as d}from"./app-DEFtxHPU.js";import{f as u}from"./functions-D-1nxOKw.js";import{F as h,R as p,a as g,p as f,D as x,P as b,T as i,V as l,I as j,S as y}from"./Rubik-Regular-BsyBpVUE.js";import{F as w}from"./file-down-BX9gQy9l.js";import{A as v,a as C}from"./Autocomplete-B3DxQing.js";import{C as B}from"./CustomInput--lAyvzU4.js";import{C as D}from"./CustomSelect-DLg8uWYO.js";import{P as F}from"./PrimaryButton-CQxOG1E5.js";import{B as P}from"./BondsList-B5BPOcLc.js";import{E as k}from"./EmptyList-C_TLzYHj.js";import{A as R,I as S}from"./InsideLayout-D5Z1yuKZ.js";import{C as _}from"./circle-plus-xIOiBSDR.js";import"./createLucideIcon-Cmz4R_pV.js";import"./loader-circle-Dk-y0QGY.js";import"./Modal-DluyJFvZ.js";import"./transition-rFVMd8Hn.js";import"./ProofInput-DM2cgUOe.js";import"./Checkbox-B7Rs45IJ.js";import"./FileInput-BioQQw6N.js";import"./SubmitButton-Dc4Vh31e.js";import"./phone-C7qLck2Q.js";import"./settings-luE4hoQS.js";h.register({family:"rubik",fonts:[{src:p,fontWeight:"normal"},{src:g,fontWeight:"bold"}]});const r=y.create({page:{flexDirection:"rtl",fontFamily:"rubik",padding:30,backgroundColor:"#f9f9f9",fontSize:13},bondsGrid:{flexDirection:"row-reverse",flexWrap:"wrap",gap:5},bondCard:{width:265,backgroundColor:"rgb(220,220,240)",borderRadius:8,padding:10},title:{fontWeight:"bold",textAlign:"center",marginBottom:14,fontSize:18},smallInfo:{fontWeight:"light",fontSize:11,textAlign:"center"},textRight:{textAlign:"right"},mb:{marginBottom:14},padwhiteBg:{borderRadius:6,padding:3,backgroundColor:"white"},maxh:{maxHeight:200},postableNo:{borderRadius:999,paddingHorizontal:8,paddingVertical:4,backgroundColor:"beige",color:"brown",textAlign:"center",fontSize:10,fontWeight:"bold",marginBottom:8}}),I=({bonds:e,currentMonth:a})=>t.jsx(x,{children:t.jsxs(b,{size:"A4",style:r.page,children:[t.jsxs(i,{style:r.title,children:["دفعات شهر"," ",a||new Date().getMonth()+1+"-"+new Date().getFullYear()]}),t.jsx(l,{style:[r.bondsGrid],children:e.map(o=>t.jsxs(l,{style:r.bondCard,children:[t.jsx(i,{style:[r.mb,r.smallInfo],children:u(new Date(o.payement_date))}),t.jsx(l,{style:[r.mb,r.maxh],children:o.proof_image?t.jsx(j,{style:r.bondProof,src:o.proof_image}):t.jsx(i,{style:[r.smallInfo,r.padwhiteBg],children:"بدون صورة إثبات"})}),!o.postable&&t.jsx(i,{style:r.postableNo,children:"شيك ضمان"}),t.jsxs(i,{style:r.smallInfo,children:[o.contract.client.full_name," |"," ",o.contract.client.phone]})]},o.payement_date))})]})});function A({bonds:e,currentMonth:a}){const o=async()=>{const n=await f(t.jsx(I,{bonds:e,currentMonth:a})).toBlob(),s=URL.createObjectURL(n);window.open(s,"_blank")};return t.jsxs("button",{onClick:o,className:"relative top-1 rounded-full border border-black py-1 pl-4 pr-1 transition-colors duration-500 hover:bg-black hover:text-white",children:[t.jsx(w,{className:"ml-2 mr-1 inline"}),"فتح PDF"]})}function N(){const e=new URLSearchParams(window.location.search),[a,o]=m.useState({month:e.get("month")||"",client_id:e.get("client_id")||"",status:e.get("status")||""}),c=n=>{n.preventDefault(),d.get(route("bonds.index"),{...a})};return t.jsx("div",{className:"mb-5 py-3",children:t.jsxs("form",{onSubmit:c,method:"get",className:"grid grid-cols-2 items-end gap-2 md:grid-cols-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(v,{placeholder:"إختر زبونا",dataFunction:async n=>C("clients",n),defaultValue:e.get("client_id"),choiceHandler:n=>o(s=>({...s,client_id:n})),listItemAtributeName:"full_name",id:"contract-filter-form",label:"الزبون"})}),t.jsx(B,{type:"month",label:"الشهر",onChange:n=>o(s=>({...s,month:n.target.value})),name:"bonds_month",defaultValue:e.get("month"),id:"bonds-month"}),t.jsxs(D,{onChange:n=>o(s=>({...s,status:n.target.value})),id:"filters-bonds-status",name:"status",defaultValue:a.status||"null",children:[t.jsx("option",{value:"",children:"الحالة"}),t.jsx("option",{value:"coming",children:"القادمة"}),t.jsx("option",{value:"pending",children:"المستحقة"}),t.jsx("option",{value:"late",children:"المتأخرة"}),t.jsx("option",{value:"very_late",children:"المتعترة"})]}),t.jsx(F,{type:"submit",className:"w-24",children:"بحث"})]})})}function rt({bonds:e}){const a=new URLSearchParams(window.location.search);return t.jsx(R,{children:t.jsxs(S,{headerTitle:a.get("month")?`دفعات ${a.get("month")} `:"دفعات هذا الشهر",headerLink:[{label:"إضافة عقد جديد",url:"/contracts/create",icon:_}],children:[t.jsx(N,{}),t.jsx("div",{children:t.jsx(A,{bonds:e,currentMonth:a.get("month")})}),t.jsx("div",{className:"max-w-2xl",children:e.length>0?t.jsx(P,{noActions:!0,bonds:e}):t.jsx(k,{model:"عقود"})})]})})}export{rt as default};
