import{r as p,j as e,a as o,y as d}from"./app-BW51sJCY.js";import{C as h,f as u}from"./functions-DuHHseie.js";import{c as s}from"./createLucideIcon-Daxuz9wX.js";import{O as f,B as j}from"./BondsList-CingNtwC.js";import{C as y,M as g}from"./ContractPDF-DtYg_Iw1.js";import{A as b,I as N}from"./InsideLayout-lr2hLF2F.js";import{S as k}from"./square-pen-BeeMpn4U.js";import{P as w}from"./phone-B1I-eZ_O.js";import"./x-noody4f_.js";import"./Modal-B9FE2C6z.js";import"./transition-Ds8Qg9uz.js";import"./PrimaryButton-CF90Hi4_.js";import"./ProofInput-Czg-K-U5.js";import"./Checkbox--xYTwl9I.js";import"./CustomInput-IfO7B0s3.js";import"./FileInput-Ca9VPC_B.js";import"./SubmitButton-BR-rPeqo.js";import"./loader-circle-CyMCh7el.js";import"./settings-BvninLX3.js";import"./Rubik-Regular-r9cpkZXg.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=s("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=s("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=s("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=s("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=s("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),M=({textToCopy:i,label:t})=>{const[a,r]=p.useState(!1),n=()=>{navigator.clipboard.writeText(i).then(()=>{r(!0),setTimeout(()=>r(!1),3e3)}).catch(l=>{console.error("Failed to copy text: ",l)})};return e.jsx("div",{children:e.jsxs("button",{className:"relative top-1 flex flex-col items-center rounded-full",onClick:n,children:[a?e.jsx(h,{size:35,className:"ml-2 inline"}):e.jsx(_,{size:35,className:"ml-2 inline"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:a?"تم النسخ!":t})]})})};function K(i){const{contract:t,auth:a,terms:r}=i,n=t.client.phone.split(" ")[0],l=window.location.origin+"/contracts/live/"+t.uuid;function m(){d.post(route("contracts.signReset",t.id),{_method:"patch"})}function x(){d.post(route("contracts.send",t.id))}return e.jsx(b,{children:e.jsx(N,{headerTitle:e.jsxs("p",{children:[e.jsx("span",{className:"mb-3 block",children:"الزبون"}),e.jsx(o,{className:"inline",href:route("clients.show",t.client.id),children:e.jsx(C,{size:30,className:"ml-2 inline"})}),e.jsx("span",{className:"rounded-full bg-black px-3 py-1 text-2xl text-white",children:t.client.full_name})]}),rightLink:{label:"تعديل على العقد",url:route("contracts.edit",t.id),icon:k},children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400 md:text-start",children:["أضيف العقد يوم"," ",u(new Date(t.created_at))]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsxs(o,{href:`/contracts/${t.id}/files?type=files`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(z,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملحق"})]}),e.jsxs(o,{href:`/contracts/${t.id}/files?type=notes`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(v,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملاحظة"})]}),e.jsx(y,{contractPage:!0,contract:t,terms:r,auth:a})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsx(M,{textToCopy:l,label:"نسخ رابط العقد"}),e.jsxs("button",{onClick:x,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(g,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"البعث للزبون"})]}),e.jsxs(f,{className:"relative top-1 flex flex-col items-center",phone:t.client.phone,text:`${encodeURIComponent(l)}%0A%0A${t.user.whatsapp_msg}`,children:[e.jsx("img",{className:"w-12",src:"/icons/wa.png",alt:"whatsapp icon"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إرسال عبر وتساب"})]})]}),e.jsxs("a",{href:`tel:+971${n}`,className:"mx-auto mt-5 flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 font-bold md:mx-0",children:[e.jsx(w,{size:20})," ",t.client.phone]}),e.jsx("hr",{className:"my-8"}),e.jsxs("h2",{className:"mb-5 text-xl font-bold",children:[" ","توقيع الزبون:"," ",e.jsx("span",{className:"rounded-lg bg-black px-3 py-1 text-white",children:t.signature&&t.signature_proof?"مكتمل":t.signature?"غير مكتمل":"في الإنتظار"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:[t.bonds_count," دفعات"]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(c,{size:20})," المبلغ الإجمالي :"," ",parseFloat(t.bonds_sum_amount).toFixed(2)]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(c,{size:20})," المبلغ المدفوع :"," ",t.paid_bonds_sum==null?0:parseFloat(t.paid_bonds_sum).toFixed(2)]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(c,{size:20})," المبلغ المتبقي :"," ",t.paid_bonds_sum==null?parseFloat(t.bonds_sum_amount).toFixed(2):(parseFloat(t.bonds_sum_amount)-parseFloat(t.paid_bonds_sum)).toFixed(2)]})]}),e.jsx("div",{children:e.jsx(j,{bonds:t.bonds})}),e.jsxs("div",{className:"my-8",children:[e.jsxs("div",{className:"mt-6 flex justify-between gap-2",children:[t.signature&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:t.signature,alt:"signature"})}),t.signature_proof&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:t.signature_proof,alt:"signature-proof"})})]}),t.signature&&e.jsx("button",{onClick:m,type:"button",className:"my-3 underline",children:"إعادة تهيئة التوقيع"})]})]})})})}export{K as default};
