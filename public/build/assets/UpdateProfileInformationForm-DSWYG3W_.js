import{q as w,r as u,W as C,j as e,a as k,y as _}from"./app-DnWngmhi.js";import{T as o,I as n}from"./TextInput-CI0yW974.js";import{I as i}from"./InputLabel-D0Qt8OYd.js";import{F}from"./FileInput-CIyWi-U9.js";import{M as S}from"./Modal-DKzegiOz.js";import{P as c}from"./PrimaryButton-796HDiS1.js";import{P as I,S as P}from"./index-DtyljiWK.js";import{X as E}from"./transition-DlFgjD1b.js";import"./createLucideIcon-DAolECTf.js";function B({status:x,className:h=""}){const a=w().props.auth.user,[p,d]=u.useState(!1),{data:t,setData:r,post:g,errors:l,processing:j,recentlySuccessful:v}=C({name:a.name,email:a.email,code:a.code,company:a.company,address:a.address,phone:a.phone,whatsapp_msg:a.whatsapp_msg,_method:"patch"}),f=s=>{s.preventDefault(),g(route("profile.update"))},m=u.useRef({}),N=()=>{m.current.clear()},y=s=>{_.post(route("profile.signature"),{signature:s,_method:"patch"},{onSuccess:()=>d(!1)})},b=()=>{if(m.current.isEmpty())return;const s=m.current.getTrimmedCanvas().toDataURL("image/png");y(s)};return e.jsxs("section",{className:h,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"معلومات الملف الشخصي"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"قم بتحديث معلومات ملفك الشخصي وعنوان بريدك الإلكتروني."})]}),e.jsxs("form",{onSubmit:f,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"الاسم"}),e.jsx(o,{id:"name",className:"mt-1 block w-full",value:t.name,onChange:s=>r("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name"}),e.jsx(n,{className:"mt-2",message:l.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"company",value:"اسم الشركة"}),e.jsx(o,{id:"company",className:"mt-1 block w-full",value:t.company,onChange:s=>r("company",s.target.value)}),e.jsx(n,{className:"mt-2",message:l.company})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"code",value:"رقم الرخصة"}),e.jsx(o,{id:"code",className:"mt-1 block w-full",value:t.code,onChange:s=>r("code",s.target.value)}),e.jsx(n,{className:"mt-2",message:l.code})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",value:"رقم الهاتف"}),e.jsx(o,{id:"phone",className:"mt-1 block w-full",value:t.phone,onChange:s=>r("phone",s.target.value)}),e.jsx(n,{className:"mt-2",message:l.phone})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"address",value:"العنوان"}),e.jsx(o,{id:"address",className:"mt-1 block w-full",value:t.address,onChange:s=>r("address",s.target.value)}),e.jsx(n,{className:"mt-2",message:l.address})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",value:"البريد الإلكتروني"}),e.jsx(o,{id:"email",type:"email",className:"mt-1 block w-full",value:t.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username"}),e.jsx(n,{className:"mt-2",message:l.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"whatsapp_msg",value:"رسالة واتساب"}),e.jsx(o,{id:"whatsapp_msg",name:"whatsapp_msg",className:"mt-1 block w-full",value:t.whatsapp_msg,onChange:s=>r("whatsapp_msg",s.target.value)}),e.jsx(n,{className:"mt-2",message:l.whatsapp_msg})]}),a.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-2 text-sm text-gray-800",children:["عنوان بريدك الإلكتروني غير موثق.",e.jsx(k,{href:route("verification.send"),method:"post",as:"button",className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"انقر هنا لإعادة إرسال رسالة التوثيق."})]}),x==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"تم إرسال رابط توثيق جديد إلى بريدك الإلكتروني."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"relative top-1 rounded-xl border border-black bg-black px-4 py-3 pr-1 text-sm text-white transition-colors duration-500 hover:bg-gray-800 hover:text-white",children:[e.jsx(I,{size:20,className:"ml-2 inline"}),"تغيير توقيع"]}),a.signature&&e.jsx("img",{className:"w-24",src:a.signature,alt:"user signature"})]}),e.jsx("div",{children:e.jsx(F,{id:"users-logo",name:"logo",label:"شعار الشركة",defaultImage:a==null?void 0:a.logo,error:l.logo,imageSelected:t.logo,onChange:s=>r("logo",s.target.files[0])})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{disabled:j,children:"حفظ"}),e.jsx(E,{show:v,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"تم الحفظ."})})]})]}),e.jsx(S,{show:p,children:e.jsxs("div",{className:"flex flex-col items-center py-4",children:[e.jsx("h2",{className:"text-black",children:"الرجاء التوقيع في المنطقة أدناه"}),e.jsx(P,{ref:m,penColor:"black",canvasProps:{width:400,height:250,className:"sigCanvas border-2 border-gray-600 rounded-xl mb-3"}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{onClick:b,children:"تأكيد"}),e.jsx(c,{onClick:N,children:"إعادة المحاولة"}),e.jsx(c,{onClick:()=>d(!1),children:"رجوع"})]})]})})]})}export{B as default};
