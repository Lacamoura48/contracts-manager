import{r as n,j as e,y as c}from"./app-3D4PXkdZ.js";import{A as d,a as m}from"./Autocomplete-Dkq42vJb.js";import{P as u}from"./PrimaryButton-DjLpjN-Q.js";import{g as x,f as b,b as p}from"./functions-DlqVqW7_.js";import{E as h}from"./EmptyList-DYn5rfAQ.js";import{A as f}from"./AuthenticatedLayout-Bah3AqvK.js";import{I as g}from"./InsideLayout-OSVjeT-T.js";import{C as j}from"./circle-plus-CSfEdj-A.js";import"./loader-circle-DKVjCU6I.js";function y(){const t=new URLSearchParams(window.location.search),[s,l]=n.useState({}),o=a=>{a.preventDefault(),c.get(route("contracts.index"),{...s})};return e.jsx("div",{className:"mb-5 py-3",children:e.jsxs("form",{onSubmit:o,method:"get",className:"flex items-end gap-2",children:[e.jsx(d,{placeholder:"إختر زبونا",dataFunction:async a=>m("clients",a),defaultValue:t.get("client_id"),choiceHandler:a=>l(r=>({...r,client_id:a})),listItemAtributeName:"full_name",id:"contract-filter-form",label:"الزبون"}),e.jsx(u,{type:"submit",className:"w-24",children:"بحث"})]})})}const N=({bonds:t})=>e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((s,l)=>e.jsx("div",{className:`h-4 w-4 rounded-full ${s}`},l))});function w({contract:t}){function s(){c.get(route("contracts.show",t.id))}const l=n.useMemo(()=>t.bonds.map(r=>x(r.status,r.payement_date)),[t.bonds]),o=r=>r.includes("bg-red-500")?{label:"متعترة الدفع",color:"bg-red-100 text-red-500"}:r.includes("bg-orange-300")?{label:"متأخر",color:"bg-orange-100 text-orange-500"}:r.includes("bg-blue-500")?{label:"مستحق الدفع",color:"bg-blue-100 text-blue-500 animate-pulse"}:r.every(i=>i==="bg-green-500")?{label:"مدفوع",color:"text-green-500 bg-green-100"}:{label:"قادم",color:"text-gray-500 bg-gray-200"},a=n.useMemo(()=>o(l),[l]);return e.jsxs("tr",{onClick:s,className:"cursor-pointer",children:[e.jsx("td",{className:"hidden border-b py-4 text-start md:block",children:e.jsx("span",{className:`block rounded-lg py-2 text-center font-bold ${a.color}`,children:a.label})}),e.jsx("td",{className:"mr-5 border-b py-4 pr-10 text-start",children:t.client.full_name}),e.jsx("td",{className:"me-5 border-b py-4 text-start",children:b(new Date(p(t.bonds)))}),e.jsx("td",{className:"me-5 w-28 border-b py-4 text-start md:w-44 lg:w-72",children:e.jsx(N,{bonds:l})})]})}function C({contracts:t}){return e.jsxs("table",{className:"mt-12 w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"w-full border-b-2 border-b-black",children:[e.jsx("th",{scope:"col",className:"small:text-xs hidden pb-4 text-start text-base md:block",children:"الحالة"}),e.jsx("th",{scope:"col",className:"small:text-xs me-5 pb-4 pr-10 text-start",children:"اسم الزبون"}),e.jsx("th",{scope:"col",className:"small:text-xs me-5 pb-4 text-start",children:"تاريخ الدفع التالي"}),e.jsx("th",{scope:"col",className:"small:text-xs me-5 pb-4 text-start",children:"الدفعات"})]})}),e.jsx("tbody",{children:t.data.map(s=>e.jsx(w,{contract:s},s.id))})]})}function I({contracts:t}){return e.jsx(f,{children:e.jsxs(g,{headerTitle:"العقود",headerLink:[{label:"إضافة عقد جديد",url:"/contracts/create",icon:j}],children:[e.jsx(y,{}),t.data.length>0?e.jsx(C,{contracts:t}):e.jsx(h,{model:"عقود"})]})})}export{I as default};
