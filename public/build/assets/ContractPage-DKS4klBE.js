import{r as x,j as e,a as o,y as d}from"./app-1Xwr3j2F.js";import{C as m,f as p}from"./functions-D-pPGhkv.js";import{c as i}from"./createLucideIcon-DTezSfTo.js";import{C as h,M as u}from"./ContractPDF-CbAV7l7a.js";import{B as f}from"./BondsList-Cgc7T8yZ.js";import{A as j,I as y}from"./InsideLayout-CDlWnFEd.js";import{S as g}from"./square-pen-BlZTD_Jb.js";import{P as b}from"./phone-ovroPAJH.js";import"./x-EB9Axt3V.js";import"./Rubik-Regular-DoIgz5Dy.js";import"./settings-cr5HS0gz.js";import"./Modal-CyOio9ne.js";import"./transition-CizVyvXQ.js";import"./PrimaryButton-BJ9KihL6.js";import"./ProofInput-hvpZ10bu.js";import"./Checkbox-B0-XYksC.js";import"./CustomInput-JcP1_YaM.js";import"./FileInput-C6Wh_e5p.js";import"./SubmitButton-6sFbLoX4.js";import"./loader-circle-n8Q3zkey.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=i("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=i("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=i("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=i("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=i("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),M=({textToCopy:s,label:l})=>{const[a,t]=x.useState(!1),r=()=>{navigator.clipboard.writeText(s).then(()=>{t(!0),setTimeout(()=>t(!1),3e3)}).catch(n=>{console.error("Failed to copy text: ",n)})};return e.jsx("div",{children:e.jsxs("button",{className:"relative top-1 flex flex-col items-center rounded-full",onClick:r,children:[a?e.jsx(m,{size:35,className:"ml-2 inline"}):e.jsx(w,{size:35,className:"ml-2 inline"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:a?"تم النسخ!":l})]})})};function z({phone:s,text:l}){const t=`https://api.whatsapp.com/send?phone=+971${s.split(" ")[0]}&text=${l}`;return e.jsxs("a",{target:"_blank",href:t,className:"relative top-1 flex flex-col items-center",rel:"noreferrer",children:[e.jsx("img",{className:"w-12",src:"/icons/wa.png",alt:"whatsapp icon"}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إرسال عبر وتساب"})]})}function J({contract:s,terms:l,auth:a}){const t=s.client.phone.split(" ")[0],r=window.location.origin+"/contracts/live/"+s.uuid;function n(){d.post(route("contracts.signReset",s.id),{_method:"patch"})}function c(){d.post(route("contracts.send",s.id))}return e.jsx(j,{children:e.jsx(y,{headerTitle:e.jsxs("p",{children:[e.jsx("span",{className:"mb-3 block",children:"الزبون"}),e.jsx(o,{className:"inline",href:route("clients.show",s.client.id),children:e.jsx(v,{size:30,className:"ml-2 inline"})}),e.jsx("span",{className:"rounded-full bg-black px-3 py-1 text-2xl text-white",children:s.client.full_name})]}),rightLink:{label:"تعديل على العقد",url:route("contracts.edit",s.id),icon:g},children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("p",{className:"mb-4 text-center text-sm text-gray-400 md:text-start",children:["أضيف العقد يوم"," ",p(new Date(s.created_at))]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsxs(o,{href:`/contracts/${s.id}/files?type=files`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(C,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملحق"})]}),e.jsxs(o,{href:`/contracts/${s.id}/files?type=notes`,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(k,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"إضافة ملاحظة"})]}),e.jsx(h,{contractPage:!0,contract:s,terms:l,auth:a})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 justify-center md:justify-start md:text-start",children:[e.jsx(M,{textToCopy:r,label:"نسخ رابط العقد"}),e.jsxs("button",{onClick:c,className:"relative top-1 flex flex-col items-center rounded-full",children:[e.jsx(u,{size:35}),e.jsx("span",{className:"mt-1 rounded-full bg-black px-3 py-1 text-sm text-white",children:"البعث للزبون"})]}),e.jsx(z,{phone:s.client.phone,text:`${encodeURIComponent(r)}%0A%0A${s.user.whatsapp_msg}`})]}),e.jsxs("a",{href:`tel:+971${t}`,className:"mx-auto mt-5 flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 font-bold md:mx-0",children:[e.jsx(b,{size:20})," ",s.client.phone]}),e.jsx("hr",{className:"my-8"}),e.jsxs("h2",{className:"mb-5 text-xl font-bold",children:[" ","توقيع الزبون:"," ",e.jsx("span",{className:"rounded-lg bg-black px-3 py-1 text-white",children:s.signature&&s.signature_proof?"مكتمل":s.signature?"غير مكتمل":"في الإنتظار"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:[s.bonds_count," دفعات"]}),e.jsxs("p",{className:"flex w-fit flex-row-reverse items-center gap-1 rounded-md bg-gray-200 px-3 py-1 md:mx-0",children:[e.jsx(N,{size:20})," المبلغ الإجمالي :"," ",parseFloat(s.bonds_sum_amount).toFixed(2)]})]}),e.jsx("div",{children:e.jsx(f,{bonds:s.bonds})}),e.jsxs("div",{className:"my-8",children:[e.jsxs("div",{className:"mt-6 flex justify-between gap-2",children:[s.signature&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature,alt:"signature"})}),s.signature_proof&&e.jsx("div",{className:"flex-1 rounded-xl bg-gray-200",children:e.jsx("img",{className:"",src:s.signature_proof,alt:"signature-proof"})})]}),s.signature&&e.jsx("button",{onClick:n,type:"button",className:"my-3 underline",children:"إعادة تهيئة التوقيع"})]})]})})})}export{J as default};
