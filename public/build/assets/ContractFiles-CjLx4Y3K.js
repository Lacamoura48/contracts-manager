import{r as m,j as e,y as f,W as h}from"./app-1Xwr3j2F.js";import{f as p,r as g}from"./functions-D-pPGhkv.js";import{M as j}from"./Modal-CyOio9ne.js";import{P as b}from"./PrimaryButton-BJ9KihL6.js";import{S as y}from"./SecondaryButton-BEjeMS3W.js";import{T as w}from"./trash-CFB11URR.js";import{C as N}from"./CustomInput-JcP1_YaM.js";import{F as S}from"./FileInput-C6Wh_e5p.js";import{S as v}from"./SubmitButton-6sFbLoX4.js";import{E as F}from"./EmptyList-CnKNTB-R.js";import{c as k}from"./createLucideIcon-DTezSfTo.js";import{A as C,I as D}from"./InsideLayout-CDlWnFEd.js";import"./x-EB9Axt3V.js";import"./transition-CizVyvXQ.js";import"./loader-circle-n8Q3zkey.js";import"./settings-cr5HS0gz.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=k("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function P({file:t}){const[a,s]=m.useState(!1);function r(){f.delete(route("files.delete",t.id),{onStart:()=>s(!1)})}return e.jsxs("div",{className:"relative mb-3 break-inside-avoid rounded-lg bg-gray-200 px-2 py-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"absolute left-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-black",children:e.jsx(w,{color:"white",size:18})}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:p(new Date(t.created_at))}),t.title&&e.jsx("p",{className:"mb-3 text-lg font-medium text-black",children:t.title}),t.image&&e.jsx("img",{className:"rounded-lg",src:t.image,alt:"file image"}),e.jsx(j,{show:a,children:e.jsxs("div",{className:"px-8 py-10",children:[e.jsxs("h2",{className:"mb-5 text-2xl font-bold",children:['هل أنت متأكد أنك تريد حذف "',t.title,'"']}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{className:"text-xl",onClick:r,children:"نعم"}),e.jsx(y,{className:"text-xl",onClick:()=>s(!1),children:"لا"})]})]})})]})}function E({closeHandler:t,contract_id:a,type:s}){const[r,o]=m.useState(!1),{data:i,setData:n,post:c,processing:d}=h({title:"",image:null,as_note:s==="notes"});function u(l){if(l.preventDefault(),!i.title&&!i.image){o("يجب ملء أحد المدخلات لإضافة ملحق");return}c(route("files.store",a),{forceFormData:!0,onFinish:t})}return e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-5 rounded-lg border-2 border-gray-200 px-2 py-5 font-medium",children:[e.jsx(N,{placeholder:s==="notes"?"الملاحظة":"عنوان للملحق",onChange:l=>n("title",l.target.value),name:"title",id:"title-files",error:r}),s==="files"&&e.jsx(S,{imageSelected:i.image,onChange:async l=>{const x=await g(l.target.files[0]);n("image",x)},name:"image",id:"image-files",label:"صورة الملحق"}),e.jsx(v,{loading:d,children:"إضافة"})]})}function L({files:t,contract_id:a,type:s}){const[r,o]=m.useState(!1);return e.jsxs("div",{children:[e.jsx("div",{className:"my-6",children:r?e.jsx(E,{type:s,closeHandler:()=>o(!1),contract_id:a}):e.jsxs("button",{onClick:()=>o(!0),className:"w-full rounded-lg bg-black py-3 text-center font-medium text-white",children:[e.jsx(I,{size:25,className:"ml-3 inline-block"}),e.jsx("span",{children:s==="files"?"إضافة ملحق":"إضافة ملاحظة"})]})}),t.length>0?e.jsx("div",{className:"columns-1 gap-3 md:columns-2",children:t.map((i,n)=>e.jsx(P,{file:i},n))}):e.jsx(F,{model:s==="files"?"ملحق":"ملاحظة"})]})}function Q({contract:t}){const a=new URLSearchParams(window.location.search);return e.jsx(C,{children:e.jsx(D,{headerTitle:`${a.get("type")==="notes"?"ملاحظات":"ملحقات"} العقد خاص ب${t.client.full_name}`,children:e.jsx("div",{className:"max-w-2xl",children:e.jsx(L,{contract_id:t.id,files:t.files,type:a.get("type")})})})})}export{Q as default};
